<!DOCTYPE html><html lang="kr-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="학원 #52일차: 계산기 Network App 만들기, 스레드" /><meta name="author" content="hayeon_kim" /><meta property="og:locale" content="kr_KR" /><meta name="description" content="계산기 프로그램 만들기" /><meta property="og:description" content="계산기 프로그램 만들기" /><link rel="canonical" href="https://hayeon17kim.github.io//posts/201006-52/" /><meta property="og:url" content="https://hayeon17kim.github.io//posts/201006-52/" /><meta property="og:site_name" content="하연" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-10-06T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="학원 #52일차: 계산기 Network App 만들기, 스레드" /><meta name="twitter:site" content="@MONI56219559" /><meta name="twitter:creator" content="@hayeon_kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"hayeon_kim"},"headline":"학원 #52일차: 계산기 Network App 만들기, 스레드","dateModified":"2020-10-06T00:00:00+08:00","datePublished":"2020-10-06T00:00:00+08:00","description":"계산기 프로그램 만들기","url":"https://hayeon17kim.github.io//posts/201006-52/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hayeon17kim.github.io//posts/201006-52/"},"@context":"https://schema.org"}</script><title>학원 #52일차: 계산기 Network App 만들기, 스레드 | 하연</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-173202420-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-173202420-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/bio-photo.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">하연</a></div><div class="site-subtitle font-italic">어제보다 나은 코드를 위해</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-laptop-code ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/hayeon17kim" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/MONI56219559" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hayeon17kim','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>학원 #52일차: 계산기 Network App 만들기, 스레드</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>학원 #52일차: 계산기 Network App 만들기, 스레드</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Oct 6, 2020, 12:00 AM +0800" > Oct 6, 2020 <i class="unloaded">2020-10-06T00:00:00+08:00</i> </span> by <span class="author"> hayeon_kim </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="4968 words">27 min</span></div></div><div class="post-content"><h1 id="계산기-프로그램-만들기">계산기 프로그램 만들기</h1><h2 id="요구사항">요구사항</h2><ul><li><p>계산기 서버와 클라이언트 만들기</p><li><p>구현 조건: 최소<code class="language-plaintext highlighter-rouge"> +, -, *, %</code> 연산자는 지원한다.</p><li><p>실행 예: 클라이언트가 계산기 서버에 접속한 후</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="n">계산기</span> <span class="n">서버에</span> <span class="n">오신</span> <span class="n">걸</span> <span class="n">환영합니다</span><span class="o">!</span>         <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">계산식을</span> <span class="n">입력하세요</span><span class="o">!</span>                      <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">예</span><span class="o">)</span> <span class="mi">23</span> <span class="o">+</span> <span class="mi">7</span>                                <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">계산식</span><span class="o">&gt;</span> <span class="mi">23</span> <span class="o">+</span> <span class="mi">7</span>                            <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span><span class="o">.</span> <span class="err">'</span><span class="n">계산식</span><span class="o">&gt;</span><span class="err">'</span> <span class="n">문자는</span> <span class="n">클라이언트에서</span> <span class="n">출력한다</span><span class="o">.</span> 
<span class="n">결과는</span> <span class="mi">23</span> <span class="o">+</span> <span class="mi">7</span> <span class="o">=</span> <span class="mi">30</span> <span class="n">입니다</span><span class="o">.</span>                <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">계산식</span><span class="o">&gt;</span> <span class="mi">23</span> <span class="o">^</span> <span class="mi">7</span>                            <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span><span class="o">.</span> <span class="err">'</span><span class="n">계산식</span><span class="o">&gt;</span><span class="err">'</span> <span class="n">문자는</span> <span class="n">클라이언트에서</span> <span class="n">출력한다</span><span class="o">.</span> 
<span class="o">^</span> <span class="n">연산자를</span> <span class="n">지원하지</span> <span class="n">않습니다</span><span class="o">.</span>             <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">계산식</span><span class="o">&gt;</span> <span class="mi">23</span>                                <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span> 
<span class="n">입력</span> <span class="n">형식이</span> <span class="n">올바르지</span> <span class="n">않습니다</span><span class="o">.</span> <span class="n">예</span><span class="o">)</span> <span class="mi">23</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">&lt;==</span> <span class="n">클라이언트에서</span> <span class="n">처리</span>
<span class="n">계산식</span><span class="o">&gt;</span> <span class="mi">23</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">1</span>                        <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span> 
<span class="n">입력</span> <span class="n">형식이</span> <span class="n">올바르지</span> <span class="n">않습니다</span><span class="o">.</span> <span class="n">예</span><span class="o">)</span> <span class="mi">23</span> <span class="o">+</span> <span class="mi">5</span> <span class="o">&lt;==</span> <span class="n">클라이언트에서</span> <span class="n">처리</span> 
<span class="n">계산식</span><span class="o">&gt;</span> <span class="n">ok</span> <span class="o">+</span> <span class="n">no</span>                           <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span> 
<span class="n">계산</span> <span class="n">중</span> <span class="n">오류</span> <span class="n">발생</span> <span class="o">-</span> <span class="o">(</span><span class="n">예외</span> <span class="n">메시지</span><span class="o">)</span>         <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">계산식</span><span class="o">&gt;</span> <span class="mi">23</span> <span class="o">/</span> <span class="mi">0</span>                            <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span> 
<span class="n">계산</span> <span class="n">중</span> <span class="n">오류</span> <span class="n">발생</span> <span class="o">-</span> <span class="o">(</span><span class="n">예외</span> <span class="n">메시지</span><span class="o">)</span>         <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span> 
<span class="n">계산식</span><span class="o">&gt;</span> <span class="n">quit</span>                              <span class="o">&lt;==</span> <span class="n">사용자의</span> <span class="n">입력</span><span class="o">.</span> <span class="err">'</span><span class="n">계산식</span><span class="o">&gt;</span><span class="err">'</span> <span class="n">문자는</span> <span class="n">클라이언트에서</span> <span class="n">출력한다</span><span class="o">.</span> 
<span class="n">안녕히</span> <span class="n">가세요</span><span class="o">!</span>                            <span class="o">&lt;==</span> <span class="n">서버의</span> <span class="n">응답</span>
</pre></table></code></div></div></ul><h2 id="1단계">1단계</h2><h3 id="client-단순히-서버에-요청하고-응답을-받아-출력한다">Client: 단순히 서버에 요청하고 응답을 받아 출력한다.</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorClient</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">8888</span><span class="o">);</span>
        <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())))</span> <span class="o">{</span>

      <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>

      <span class="n">input</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>

      <span class="n">input</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>

    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server-단순히-클라이언트-요청에-응답한다">Server: 단순히 클라이언트 요청에 응답한다.</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorServer</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

    <span class="k">try</span> <span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">8888</span><span class="o">))</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"서버 실행 중..."</span><span class="o">);</span>

      <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
          <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
          <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());)</span> <span class="o">{</span>

        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산기 서버에 오신 걸 환영합니다!"</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산식을 입력하세요!"</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"예) 23 + 7"</span><span class="o">);</span>
        <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
      <span class="o">}</span>

    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="2단계-응답의-종료-조건을-설정">2단계: 응답의 종료 조건을 설정</h2><ul><li>응답의 종료 조건을 설정하면 언제까지 읽어야 할 지 결정하기 쉽다.<li>빈 줄을 받을 때까지 응답을 읽어 출력한다.</ul><h3 id="client">Client</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
    <span class="c1">// 빈 줄을 읽었다면 읽기를 끝낸다.</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server">Server</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산기 서버에 오신 걸 환영합니다!"</span><span class="o">);</span>
<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산식을 입력하세요!"</span><span class="o">);</span>
<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"예) 23 + 7"</span><span class="o">);</span>
<span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> <span class="c1">// 응답의 끝을 표시하는 빈 줄을 보낸다.</span>
<span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
</pre></table></code></div></div><h2 id="3단계-메서드-분리">3단계: 메서드 분리</h2><p>기능 별로 메서드를 분리하면 코드를 관리하기가 편하다.</p><h3 id="client-응답을-읽는-코드를-별도의-메서드로-분리">Client: 응답을 읽는 코드를 별도의 메서드로 분리</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">8888</span><span class="o">);</span>
      <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
      <span class="nc">BufferedInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedInputStream</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamREader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())))</span> <span class="o">{</span>
    
    <span class="n">readResponse</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="kt">void</span> <span class="nf">readResponse</span><span class="o">(</span><span class="nc">BufferedInputStream</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
  <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span>
      <span class="k">break</span><span class="o">;</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server-안내-메시지-전송-코드를-별도의-메서드로-분리">Server: 안내 메시지 전송 코드를 별도의 메서드로 분리</h3><p>클라이언트가 접속했을 때 안내하는 문구를 보내는 코드를 별도의 메서드로 분리한다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">8888</span><span class="o">))</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"서버 실행 중.."</span><span class="o">);</span>
    
    <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
        <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">()))</span> <span class="o">{</span>
      
      <span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
      
    <span class="o">}</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span> 

<span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendIntroMessage</span><span class="o">(</span><span class="nc">PrintStream</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[비트캠프 계산기]"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산기 서버에 오신 걸 환영합니다!"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산식을 입력하세요!"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"예) 23 + 7"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> <span class="c1">// 응답의 끝을 표시하는 빈 줄을 보낸다.</span>
    <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="4단계">4단계</h2><h3 id="client-사용자로부터-계산식을-입력받아서-서버에-전달">Client: 사용자로부터 계산식을 입력받아서 서버에 전달</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">readResponse</span><span class="o">(</span><span class="n">in</span><span class="o">);</span> <span class="c1">// 서버의 인삿말을 읽기</span>

<span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">keyBoardScanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
  <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
  <span class="n">readResponse</span><span class="o">();</span> <span class="c1">// 서버의 실행 결과를 출력</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server-클라이언트가-보낸-요청을-받아-그대로-되돌려-준다">Server: 클라이언트가 보낸 요청을 받아 그대로 되돌려 준다.</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>

<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">request</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
  <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="5단계-코드-리팩토링">5단계: 코드 리팩토링</h2><h3 id="client-1">Client</h3><ul><li>응답을 보내는 코드를 분리하여 <code class="language-plaintext highlighter-rouge">sendRequest()</code> 메서드로 만든다.<li>기존 <code class="language-plaintext highlighter-rouge">readResponse()</code> 메서드명을 <code class="language-plaintext highlighter-rouge">receiveResponse()</code>로 바꾼다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

  <span class="k">try</span> <span class="o">(</span>
    <span class="nc">Scanner</span> <span class="n">keyboardScanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
    <span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Socket</span><span class="o">(</span><span class="s">"localhost"</span><span class="o">,</span> <span class="mi">8888</span><span class="o">);</span>
    <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
    <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">())))</span> <span class="o">{</span>

    <span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>

    <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">keyboardScanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>
      <span class="n">sendRequest</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">input</span><span class="o">);</span> <span class="c1">// 서버에 요청을 보내기</span>
      <span class="n">receiveResponse</span><span class="o">(</span><span class="n">in</span><span class="o">);</span> <span class="c1">// 서버의 실행 결과를 받기</span>
    <span class="o">}</span>

  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>

<span class="c1">// 메서드 분리</span>
<span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendRequest</span><span class="o">(</span><span class="nc">PrintStream</span> <span class="n">out</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
<span class="o">}</span>

<span class="kd">static</span> <span class="kt">void</span> <span class="nf">receiveResponse</span><span class="o">(</span><span class="nc">BufferedReader</span> <span class="n">in</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
  <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
    <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">length</span><span class="o">()</span> <span class="o">==</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// 빈 줄을 읽었다면 읽기를 끝낸다.</span>
      <span class="k">break</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">input</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server-1">Server</h3><ul><li>클라이언트에게 응답하는 코드를 <code class="language-plaintext highlighter-rouge">sendResponse()</code> 메서드로 추출</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorServer</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span><span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ServerSocket</span><span class="o">(</span><span class="mi">8888</span><span class="o">))</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"서버 실행 중..."</span><span class="o">);</span>
      <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">();</span>
          <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
          <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());)</span> <span class="o">{</span>
        
        <span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
        
        <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
          <span class="nc">String</span> <span class="n">request</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
          <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">request</span><span class="o">);</span> <span class="c1">// 클라이언트에게 응답한다.</span>
        <span class="o">}</span>
      <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendResponse</span><span class="o">(</span><span class="n">printStream</span> <span class="n">out</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">message</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
    <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="kd">static</span> <span class="kt">void</span> <span class="nf">sendIntroMessage</span><span class="o">(</span><span class="nc">PrintStream</span> <span class="n">out</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"[비트캠프 계산기]"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산기 서버에 오신 걸 환영합니다!"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"계산식을 입력하세요!"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"예) 23 + 7"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span> <span class="c1">// 응답의 끝을 표시하는 빈 줄을 보낸다.</span>
    <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="6단계">6단계</h2><h3 id="client-사용자에게-프롬프트-제시하고-계산식을-입력-받기">Client: 사용자에게 프롬프트 제시하고 계산식을 입력 받기</h3><ul><li><code class="language-plaintext highlighter-rouge">prompt()</code><ul><li>사용자로부터 계산식을 입력받는 메서드<li>사용자가 입력한 값을 검증한다. (올바르지 않은 값이면 null)</ul><li><code class="language-plaintext highlighter-rouge">prompt()</code>의 리턴값이 null이라면 continue를 통해 값을 다시 입력받게 한다.</ul><p><strong>main()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c1">//..</span>
<span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">prompt</span><span class="o">(</span><span class="n">keyboardScanner</span><span class="o">);</span>
  
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> 
    <span class="k">continue</span><span class="o">;</span>
  
  <span class="n">sendRequest</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">input</span><span class="o">);</span>
  <span class="n">receiveResponse</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//..</span>
</pre></table></code></div></div><p><strong>prompt()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="kt">void</span> <span class="nf">prompt</span><span class="o">(</span><span class="nc">PrintStream</span> <span class="n">out</span><span class="o">,</span> <span class="nc">Scanner</span> <span class="n">keyboardScanner</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"계산식&gt; "</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">keyboardScanner</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">).</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 사용자가 입력한 값을 검증</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"입력 형식이 올바르지 않습니다. 예) 23 + 5"</span><span class="o">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="n">input</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server-클라이언트가-보내온-계산식을-실행하여-결과를-리턴">Server: 클라이언트가 보내온 계산식을 실행하여 결과를 리턴</h3><p><strong>main()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">//..</span>
<span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>

<span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">request</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">compute</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span> <span class="c1">// 클라이언트에게 응답한다.</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>compute()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="nc">String</span> <span class="nf">compute</span><span class="o">(</span><span class="nc">String</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span><span class="o">[]</span> <span class="n">values</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
  
  <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
  <span class="nc">String</span> <span class="n">op</span> <span class="o">=</span> <span class="n">values</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
  <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>
  <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
  
  <span class="k">switch</span> <span class="o">(</span><span class="n">op</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">case</span> <span class="s">"+"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="s">"-"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="s">"*"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
    <span class="k">case</span> <span class="s">"/"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
    <span class="k">default</span><span class="o">:</span>
      <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s 연산자를 지원하지 않습니다."</span><span class="o">,</span> <span class="n">op</span><span class="o">);</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"결과는 %d %s %d = %d 입니다."</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="n">op</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="7단계">7단계</h2><h3 id="client-프로그램-종료-명령-quit-처리하기">Client: 프로그램 종료 명령 ‘quit’ 처리하기</h3><p><strong>main()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="c1">//..</span>
<span class="n">receiveResponse</span><span class="o">(</span><span class="n">in</span><span class="o">);</span> <span class="c1">// 서버의 인사말을 받기</span>

<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">prompt</span><span class="o">(</span><span class="n">keyboardScanner</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">continue</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">compute</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  <span class="n">sendRequest</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
  
  <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"quit"</span><span class="o">))</span>
    <span class="k">break</span><span class="o">;</span>
<span class="o">}</span>
<span class="c1">//..</span>
</pre></table></code></div></div><h3 id="server-클라이언트의-종료-요청-quit-처리">Server: 클라이언트의 종료 요청 ‘quit’ 처리</h3><p><strong>main()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="c1">//..</span>
<span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>

<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">String</span> <span class="n">request</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"quit"</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="s">"안녕히 가세요!"</span><span class="o">);</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">compute</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
  <span class="n">sendRequest</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
<span class="o">}</span>
<span class="c1">//..</span>
</pre></table></code></div></div><h2 id="8단계-예외처리-추가">8단계: 예외처리 추가</h2><h3 id="server-2">Server</h3><p><strong>compute()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="nc">String</span> <span class="nf">compute</span><span class="o">(</span><span class="nc">String</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">{</span>
    <span class="nc">String</span><span class="o">[]</span> <span class="n">values</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">);</span>
    <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">[</span><span class="mi">0</span><span class="o">]);</span>
    <span class="nc">String</span> <span class="n">op</span> <span class="o">=</span> <span class="n">values</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
    <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="nc">Integer</span><span class="o">.</span><span class="na">parseInt</span><span class="o">(</span><span class="n">values</span><span class="o">[</span><span class="mi">2</span><span class="o">]);</span>
    <span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="k">switch</span> <span class="o">(</span><span class="n">op</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">case</span> <span class="s">"+"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="s">"-"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="s">"*"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
      <span class="k">case</span> <span class="s">"/"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
      <span class="k">default</span><span class="o">:</span>
        <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s 연산자를 지원하지 않습니다."</span><span class="o">,</span> <span class="n">op</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"결과는 %d %s %d = %d 입니다."</span><span class="o">,</span> <span class="n">a</span><span class="o">,</span> <span class="n">op</span><span class="o">,</span> <span class="n">b</span><span class="o">,</span> <span class="n">result</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"계산 중 오류 발생! - %s"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="9단계-리팩토링">9단계: 리팩토링</h2><h3 id="server-클라이언트-요청을-처리하는-메서드를-별도의-클래스로-분리">Server: 클라이언트 요청을 처리하는 메서드를 별도의 클래스로 분리</h3><ul><li>소켓에 연결된 클라이언트 요청을 처리하는 <code class="language-plaintext highlighter-rouge">RequestProcessor</code> 클래스를 만든다.<li>Socket 정보는 생성자의 파라미터로 받는다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestProcessor</span> <span class="o">{</span>
  <span class="nc">Socket</span> <span class="n">socket</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="nf">RequestProcessor</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 소켓을 닫아주기 위해 다시 한 번 받는다.</span>
    <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">socket</span><span class="o">;</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
         <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>
        <span class="o">)</span> <span class="o">{</span>
      <span class="n">sendIntroMessage</span><span class="o">(</span><span class="n">out</span><span class="o">);</span>
      
      <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">String</span> <span class="n">request</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">();</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">request</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"quit"</span><span class="o">))</span> <span class="o">{</span>
          <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="s">"안녕히 가세요!"</span><span class="o">);</span>
          <span class="k">break</span><span class="o">;</span>
        <span class="o">}</span>
        <span class="nc">String</span> <span class="n">message</span> <span class="o">=</span> <span class="n">compute</span><span class="o">(</span><span class="n">request</span><span class="o">);</span>
        <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">message</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="kd">private</span> <span class="nc">String</span> <span class="nf">compute</span><span class="o">(</span><span class="nc">String</span> <span class="n">request</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 요청 문자열을 받아 계산을 하고 결과값을 문자열로 리턴하는 메서드</span>
  <span class="o">}</span>
  
  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">sendResponse</span><span class="o">(</span><span class="nc">PrintStream</span> <span class="n">out</span><span class="o">,</span> <span class="nc">String</span> <span class="n">message</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 응답을 보내는 메서드</span>
  <span class="o">}</span> 
  
  <span class="kd">private</span> <span class="kt">void</span> <span class="nf">sendIntroMessage</span><span class="o">(</span><span class="nc">PrintStream</span> <span class="n">out</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 인삿말을 보내는 메서드</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><blockquote><p>socket을 static 필드가 아니라 인스턴스 필드로 만든 이유: 실무에서는 인스턴스 멤버를 기본으로 한다. Socket을 static 변수로 할 수도 있지만, 그러면 동시에 여러 클라이언트를 처리해야 할 상황이 생겼을 때 별도로 요청을 동시에 처리할 수 없다. 따라서 확장성을 위해(나중에 어떻게 될 지 모르니까 가능한 가능성을 열어둔다.) 인스턴스 필드로 만든다. 이때, 인스턴스의 값은 나중에 생성자에서 받는다. 이 인스턴스 필드를 사용하는 메서드는 인스턴스 메서드가 될 것이다. 그러면 이제 CalculatorServer에서는 RequestProcessor 인스턴스를 생성하고 사용해야 한다.</p></blockquote><blockquote><p>requestProcessor는 고객을 응대하는 의사이고, 클라이언트는 대기실에 들어와 있다가 순차적으로 의사를 만날 수 있다.</p></blockquote><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorServer</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span>  <span class="k">new</span> <span class="nf">ServerSocket</span><span class="o">(</span><span class="mi">8888</span><span class="o">);)</span> <span class="o">{</span>
      
      <span class="k">new</span> <span class="nf">RequestProcessor</span><span class="o">(</span><span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">()).</span><span class="na">service</span><span class="o">();</span>
    
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><h2 id="10단계-다중-클라이언트-접속-처리">10단계: 다중 클라이언트 접속 처리</h2><h3 id="server-반복문을-이용하여-계속해서-클라이언트-접속을-처리">Server: 반복문을 이용하여 계속해서 클라이언트 접속을 처리</h3><p>9단계까지는 한 클라이언트와 연결하고 클라이언트에서 quit 메시지를 보내면 서버도 종료되었다. 여러 클라이언트와 연결하기 위해 클라이언트와 연결하는 문장을 while문으로 감싼다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">while</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">new</span> <span class="nf">RequestProcessor</span><span class="o">(</span><span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">()).</span><span class="na">service</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p>이 경우 클라이언트와 연결될 때마다 RequestProcessor 객체가 생성된다. 그러나 아직 그럴 필요가 없다. 새로운 객체가 필요한 것이 아니라 객체의 소켓 필드의 값만 다른 클라이언트 정보로 설정해주면 된다. 현재 필드 값 변경은 생성자가 초기화할 수 있다. 이 방법이 아니라 Socket 필드 값을 변경하는 <code class="language-plaintext highlighter-rouge">setSocket()</code> 메서드를 작성하고, CalculatorServer에서 호출하도록 만들자.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestProcessor</span> <span class="o">{</span>
  <span class="nc">Socket</span> <span class="n">socket</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setSocket</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>일종의 요리사. 일종의 의사 requestProcessor</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">CalculatorServer</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">try</span> <span class="o">(</span><span class="nc">ServerSocket</span> <span class="n">serverSocket</span>  <span class="k">new</span> <span class="nf">ServerSocket</span><span class="o">(</span><span class="mi">8888</span><span class="o">);)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"서버 실행 중..."</span><span class="o">);</span>
      
      <span class="nc">RequestProcessor</span> <span class="n">requestProcessor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">RequestProcessor</span><span class="o">();</span>
      
      <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  			<span class="n">requestProcessor</span><span class="o">.</span><span class="na">setSocket</span><span class="o">(</span><span class="n">serverSocket</span><span class="o">.</span><span class="na">accept</span><span class="o">()).</span><span class="na">service</span><span class="o">();</span>
      <span class="o">}</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>현재 방식의 문제점</strong></p><p>현재 작업 중인 클라이언트와의 연결이 끝날 때까지 <strong>다른 클라이언트는 대기열에서 기다려야 한다</strong>.</p><h2 id="11단계-stateful-방식을-stateless-방식으로-전환">11단계: Stateful 방식을 Stateless 방식으로 전환</h2><h3 id="client-2">Client</h3><ul><li>요청할 때 연결해서 요청이 끝나면 즉시 연결을 끊는다.<li>stateless방식은 요청 때마다 연결하기 때문에 요청을 처리하는 데 연결 시간이 추가되는 문제가 있다.<li>즉 한 번에 한 클라이언트의 요청을 처리하기 때문에 한 클라이언트의 요청을 처리하기 때문에 특정한 클라이언트 서버에 묶이는 현상이 덜하다.<li>서버 입장에서는 클라이언트의 대기시간을 줄일 수 있다.<li>클라이언트 입장에서도 다른 클라이언트가 서버를 독점하는 것을 피할 수 있다.</ul><p><strong>main()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">Scanner</span> <span class="n">keyboardScanner</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Scanner</span><span class="o">(</span><span class="nc">System</span><span class="o">.</span><span class="na">in</span><span class="o">);</span>
  <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>

    <span class="c1">// 요청할 때마다 연결하기 때문에 서버의 인사말은 더이상 출력하지 않는다.</span>
    <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">prompt</span><span class="o">(</span><span class="n">keyboardScanner</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">input</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span>
      <span class="k">continue</span><span class="o">;</span>
    <span class="k">else</span> <span class="nf">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"quit"</span><span class="o">))</span>
      <span class="c1">// quit 명령을 입력할 경우 서버에 접속할 필요 없이 즉시 클라이언트를 종료한다.</span>
      <span class="k">break</span><span class="o">;</span>
    <span class="k">try</span> <span class="o">(</span>
      <span class="nc">Socket</span><span class="o">;</span>
      <span class="nc">PrintStream</span><span class="o">;</span>
      <span class="nc">Bufferedin</span><span class="o">)</span> <span class="o">{</span>

      <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">prompt</span><span class="o">(</span><span class="n">keyboardScanner</span><span class="o">);</span>
      <span class="n">sendRequest</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">input</span><span class="o">);</span> <span class="c1">// 서버에 요청을 보내기</span>
      <span class="n">receiveResponse</span><span class="o">(</span><span class="n">in</span><span class="o">);</span> <span class="c1">// 서버의 실행 결과를 받기</span>
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
  <span class="n">keyboardScanner</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>prompt()</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">static</span> <span class="nc">String</span> <span class="nf">prompt</span><span class="o">(</span><span class="nc">Scanner</span> <span class="n">keyboardScanner</span><span class="o">)</span> <span class="o">{</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"계산식&gt; "</span><span class="o">);</span>
  <span class="nc">String</span> <span class="n">input</span> <span class="o">=</span> <span class="n">keyboardScanner</span><span class="o">.</span><span class="na">nextLine</span><span class="o">();</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">equalsIgnoreCase</span><span class="o">(</span><span class="s">"quit"</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">input</span><span class="o">;</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">input</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">" "</span><span class="o">).</span><span class="na">length</span> <span class="o">!=</span> <span class="mi">3</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 사용자가 입력한 값을 검증</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"입력 형식이 올바르지 않습니다. 예) 23 + 5"</span><span class="o">);</span>
    <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="k">return</span> <span class="n">input</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="server-3">Server</h3><ul><li>클라이언트 한 번 접속에 한 번의 요청만 처리한다.</ul><p><strong>RequestProcessor.service()</strong></p><ul><li>더 이상 메서드 안에서 반복문을 실행하지 않는다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
  <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">socket</span><span class="o">;</span>
      <span class="nc">BufferedReader</span><span class="o">;</span>
      <span class="nc">PrintStream</span> <span class="n">out</span><span class="o">;)</span> <span class="o">{</span>
    <span class="c1">// 클라이언트 접속에 대해 더이상 안내 메시지를 제공하지 않는다.</span>
    
    <span class="c1">// 한 번 접속에 한 번의 요청만 처리한다.</span>
    <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">compute</span><span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">()));</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>HTTP 프로토콜은 Stateless방식이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/95239196-94f85380-0845-11eb-92db-b40dfd5e413f.png" alt="image" /></p><p>웹 브라우저에서도 페이지를 바꿀 때마다 (브라우저가 웹 서버로 연결하고-요청하고-응답하고-연결끊고)를 반복한다. 즉 stateless 계산기 프로그램은 웹 어플리케이션과 똑같이 동작하는 프로그램을 만난 것이다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/95239016-55ca0280-0845-11eb-855a-8ac6728d1f13.png" alt="image" /></p><h3 id="한계">한계</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="k">switch</span> <span class="o">(</span><span class="n">op</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">case</span> <span class="s">"+"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span><span class="o">;</span> <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">10000</span><span class="o">);</span> <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"-"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">-</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"*"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">*</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
  <span class="k">case</span> <span class="s">"/"</span><span class="o">:</span> <span class="n">result</span> <span class="o">=</span> <span class="n">a</span> <span class="o">/</span> <span class="n">b</span><span class="o">;</span> <span class="k">break</span><span class="o">;</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="k">return</span> <span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"%s 연산자를 지원하지 않습니다."</span><span class="o">,</span> <span class="n">op</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>stateless방식이 stateful 방식보다 클라이언트를 더 많이 수용할 수 있다는 점에서는 좋지만, 특정 요청을 수행할 때 시간이 걸리는 작업이면 그 다음 클라이언트의 요청을 처리하지 못하는 것은 매한가지이다.</p><h2 id="12단계-동시에-여러-클라이언트의-요청-처리">12단계: 동시에 여러 클라이언트의 요청 처리</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/95239951-adb53900-0846-11eb-91fd-a95925115373.png" alt="image" /></p><ul><li>스레드를 이용하면 동시에 여러 클라이언트 요청을 처리할 수 있다.<li>클라이언트 요청을 처리하는 코드를 main 실행과 분리하여 별도로 실행하게 한다.</ul><p><strong>RequestProcessor</strong></p><ul><li>해당 코드를 main 실행과 분리하여 실행한다.<li>Thread를 상속받고 <code class="language-plaintext highlighter-rouge">run()</code> 메서드를 오버라이딩한다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">RequestProcessor</span> <span class="kd">extends</span> <span class="nc">Thread</span> <span class="o">{</span>
  <span class="nc">Socket</span> <span class="n">socket</span><span class="o">;</span>
  
  <span class="c1">// run() 메서드를 재호출 할 수 없기 때문에 각 클라이언트마다 RequestProcessor를 생성해야 한다.</span>
  <span class="c1">// 따라서 Socket 객체를 파라미터로 받는 생성자를 정의한다.</span>
  <span class="kd">public</span> <span class="nf">RequestProcessor</span><span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">socket</span> <span class="o">=</span> <span class="n">socket</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">run</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// 이 메서드는 한 번 호출되면 재호출될 수 없다.</span>
    <span class="c1">// 따라서 한 스레드당 한 번만 호출될 수 있다.</span>
    
    <span class="c1">// =&gt; main 실행과 분리하여 독립적으로 실행할 코드가 있다면 이 메서드 안에 둔다.</span>
    <span class="k">try</span> <span class="o">(</span><span class="nc">Socket</span> <span class="n">socket</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">socket</span><span class="o">;</span>
        <span class="nc">BufferedReader</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedReader</span><span class="o">(</span><span class="k">new</span> <span class="nc">InputStreamReader</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
        <span class="nc">PrintStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PrintStream</span><span class="o">(</span><span class="n">socket</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());)</span> <span class="o">{</span>
      
      <span class="c1">// 한 번 접속에 한 번의 요청만 처리한다.</span>
      <span class="n">sendResponse</span><span class="o">(</span><span class="n">out</span><span class="o">,</span> <span class="n">compute</span><span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">readLine</span><span class="o">()));</span>
      
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"클라이언트 요청 처리 중 오류 발생! - %s"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
    <span class="o">}</span>
  <span class="o">}</span>

<span class="c1">//..</span>
</pre></table></code></div></div><p><strong>CalculatorServer</strong></p><p>클라이언트가 접속하면, 각 클라이언트 요청을 main 실행에서 분리하여 별도로 실행해야 하기 때문에 각 클라이언트에 대해 Thread 객체를 따로 만들어 실행한다. 그래서 이전처럼 한 객체를 사용할 수는 없다.</p><p><code class="language-plaintext highlighter-rouge">run()</code> 메서드를 직접 호출하면 안 된다. 스레드에게 독립적으로 실행하라고 명령해야 한다. <code class="language-plaintext highlighter-rouge">start()</code>메서드는 main 실행과 분리하여 별도의 실행 모드에서 <code class="language-plaintext highlighter-rouge">run()</code>을 호출한다. 그런 후 <code class="language-plaintext highlighter-rouge">run()</code> 메서드가 리턴할 때까지 기다리지 않고 즉시 리턴한다. 따라서 기존 클라이언트의 요청을 처리하는 데 시간이 걸리더라도 다른 클라이언트는 영향을 받지 않는다.</p><pre><code class="language-ajva">public class CalculatorServer {
  public static void main(String[] args) {
    try(ServerSocket serverSocket = new ServerSocket(8888)) {
      System.out.println("서버 실행 중...");
      while (true) {
        RequestProcessor requestProcessor = new RequestProcessor(serverSocket.accept());
        requestProcessor.start();        
      }
      
    } catch (Exception e) {
      e.printStackTrace();
    }
  }
}

</code></pre><h3 id="스레드">스레드</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/95239990-bad22800-0846-11eb-95ee-9dbe6dc08179.png" alt="image" /></p><p>start() 메서드를 호출하는 순간 새로운 실타래, 실행, Thread를 만든다. thread를 start하면 main메서드에서 분리되어서 새로운 실행이 시작된다. 이 실타래는 main() 메서드와 다른 살타래(독립적인 실행)이다. 여기서 메서드를 호출할 수 있겠지만 그 호출도 실행 흐름 안에 있다.</p><p>클라이언트 요청을 처리할 조수를 만들고, 대기열에서 스타트를 하고 즉시 대기하고 있는 또다른 클라이언트를 꺼내서 새로운 스레드를 만든다. start()는 호출한 즉시 리턴한다. run 메서드는 직접 호출하면 안된다. 직접 호출하면 run 메서드가 리턴될 때까지 기다려야 하기 때문이다.</p><p><strong>서버 프로그램은 반드시 멀티 스레딩 방식</strong>을 사용해야 한다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/bitcamp/'>bitcamp</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/bitcamp/" class="post-tag no-text-decoration" >bitcamp</a> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=학원 #52일차: 계산기 Network App 만들기, 스레드 - 하연&url=https://hayeon17kim.github.io//posts/201006-52/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=학원 #52일차: 계산기 Network App 만들기, 스레드 - 하연&u=https://hayeon17kim.github.io//posts/201006-52/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=학원 #52일차: 계산기 Network App 만들기, 스레드 - 하연&url=https://hayeon17kim.github.io//posts/201006-52/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/system-deisign-capacity-estimation/">System Design: Capacity Estimate</a><li><a href="/posts/today-i-learned-2021-04-27/">주니어 성장일기: 2021.04.27</a><li><a href="/posts/today-i-learned-2021-04-26/">주니어 성장일기: 2021.04.26</a><li><a href="/posts/fastcampus-01/">자료구조와 알고리즘이란</a><li><a href="/posts/today-i-learned-2021-04-25/">주니어 성장일기: 2021.04.25</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble-shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/201123-85/"><div class="card-body"> <span class="timeago small" > Nov 23, 2020 <i class="unloaded">2020-11-23T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #85일차:서블릿 프로그래밍, WAS, JavaEE와 Servlet 컨테이너, Servlet 인터페이스의 Life-cycle 메서드</h3><div class="text-muted small"><p> 서블릿 프로그래밍 웹 애플리케이션 서버 아키텍쳐의 개념 JavaEE와 Servlet API의 관계 JavaEE 구현체와 서블릿 컨테이너의 관계 eomcs-web-project/src-00 예제 실습 Servlet 인터페이스와 Life-cycle 메서드 WAS(Web Application Server) 아키텍처 이전까지는 사...</p></div></div></a></div><div class="card"> <a href="/posts/201124-86/"><div class="card-body"> <span class="timeago small" > Nov 24, 2020 <i class="unloaded">2020-11-24T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환</h3><div class="text-muted small"><p> 서블릿 컨테이너가 관리하는 컴포넌트는 서블릿, 필터, 리스너로 3가지이다. Servlet 만들기 1. javax.servlet.Servlet 인터페이스 구현 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38...</p></div></div></a></div><div class="card"> <a href="/posts/201125-87/"><div class="card-body"> <span class="timeago small" > Nov 25, 2020 <i class="unloaded">2020-11-25T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #87일차: HTML 태그 사용법</h3><div class="text-muted small"><p> HTML/CSS 학습법: 결과 화면 먼저 보고 소스코드를 확인하자 UI와 UX UX(User Experience; 사용자 경험): 사용자 편의성 ex: 링크에 hover했을 때 커서가 손모양으로 바뀌어야 한다. UI(User Interface): 기능을 하는 화면이 있는가 HTML ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/201005-51/" class="btn btn-outline-primary" prompt="Older"><p>학원 #51일차: HTTP, URL, Base64</p></a> <a href="/posts/201007-53/" class="btn btn-outline-primary" prompt="Newer"><p>학원 #53일차: 계산기 Network App, 채팅 App, 스레드</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//hayeon17kim-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = '학원 #52일차: 계산기 Network App 만들기, 스레드'; this.page.url = 'https://hayeon17kim.github.io//posts/201006-52/'; this.page.identifier = '/posts/201006-52/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/MONI56219559">hayeon_kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://hayeon17kim.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
