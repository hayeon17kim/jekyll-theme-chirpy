<!DOCTYPE html><html lang="kr-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환" /><meta name="author" content="hayeon_kim" /><meta property="og:locale" content="kr_KR" /><meta name="description" content="서블릿 컨테이너가 관리하는 컴포넌트는 서블릿, 필터, 리스너로 3가지이다." /><meta property="og:description" content="서블릿 컨테이너가 관리하는 컴포넌트는 서블릿, 필터, 리스너로 3가지이다." /><link rel="canonical" href="https://hayeon17kim.github.io//posts/201124-86/" /><meta property="og:url" content="https://hayeon17kim.github.io//posts/201124-86/" /><meta property="og:site_name" content="하연" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-24T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환" /><meta name="twitter:site" content="@MONI56219559" /><meta name="twitter:creator" content="@hayeon_kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"hayeon_kim"},"headline":"학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환","dateModified":"2020-11-24T00:00:00+08:00","datePublished":"2020-11-24T00:00:00+08:00","description":"서블릿 컨테이너가 관리하는 컴포넌트는 서블릿, 필터, 리스너로 3가지이다.","url":"https://hayeon17kim.github.io//posts/201124-86/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hayeon17kim.github.io//posts/201124-86/"},"@context":"https://schema.org"}</script><title>학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환 | 하연</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-173202420-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-173202420-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/bio-photo.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">하연</a></div><div class="site-subtitle font-italic">어제보다 나은 코드를 위해</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-laptop-code ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/hayeon17kim" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/MONI56219559" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hayeon17kim','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Tue, Nov 24, 2020, 12:00 AM +0800" > Nov 24, 2020 <i class="unloaded">2020-11-24T00:00:00+08:00</i> </span> by <span class="author"> hayeon_kim </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="6538 words">36 min</span></div></div><div class="post-content"><p><strong>서블릿 컨테이너</strong>가 <strong>관리</strong>하는 <strong>컴포넌트</strong>는 <strong>서블릿, 필터, 리스너</strong>로 3가지이다.</p><h2 id="servlet-만들기">Servlet 만들기</h2><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100037555-b9d07680-2e45-11eb-85cd-f4693cafc45e.png" alt="image" /></p><h3 id="1-javaxservletservlet-인터페이스-구현">1. <code class="language-plaintext highlighter-rouge">javax.servlet.Servlet</code> 인터페이스 구현</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
</pre><td class="rouge-code"><pre><span class="c1">//@WebServlet("/ex01/first")</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Servlet01</span> <span class="kd">implements</span> <span class="nc">Servlet</span> <span class="o">{</span>

  <span class="nc">ServletConfig</span> <span class="n">config</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Servlet01</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet01()"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="nc">ServletConfig</span> <span class="n">config</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">config</span> <span class="o">=</span> <span class="n">config</span><span class="o">;</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet01.init(ServletConfig)"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">res</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet01.service(ServletRequest,ServletResponse)"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet01.destroy()"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">ServletConfig</span> <span class="nf">getServletConfig</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet01.getServletConfig()"</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">config</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getServletInfo</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet01.getServletInfo()"</span><span class="o">);</span>
    <span class="k">return</span> <span class="s">"Servlet01"</span><span class="o">;</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><h3 id="2-javaxservletgenericservlet-추상클래스-상속">2. <code class="language-plaintext highlighter-rouge">javax.servlet.GenericServlet</code> 추상클래스 상속</h3><p>만약 <code class="language-plaintext highlighter-rouge">Servlet</code> 인터페이스를 구현한다면 Servlet의 모든 메서드를 구현해야 할 것이다. 그러나 5개의 메서드를 각 Servlet마다 구현하는 것은 번거로운 작업이다. 이를 위해서 자바는 <code class="language-plaintext highlighter-rouge">GenericServlet</code> 추상클래스를 제공한다. <code class="language-plaintext highlighter-rouge">GenericServlet</code>의 특징은 다음과 같다.</p><ul><li><code class="language-plaintext highlighter-rouge">java.servlet.Servlet</code> 인터페이스를 구현하였다.<li><code class="language-plaintext highlighter-rouge">service()</code> 메서드만 남겨두고 나머지 메서드들은 모두 구현하였다.<li>따라서 이 클래스를 상속받는 서브 클래스는 <code class="language-plaintext highlighter-rouge">service()</code> 만 구현하면 된다.</ul><p><strong>GenericServlet</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">GenericServlet</span> 
    <span class="kd">implements</span> <span class="nc">Servlet</span><span class="o">,</span> <span class="nc">ServletConfig</span><span class="o">,</span> <span class="n">java</span><span class="o">.</span><span class="na">io</span><span class="o">.</span><span class="na">Serializable</span>
<span class="o">{</span>
</pre></table></code></div></div><p>주목해야 할 점은 <code class="language-plaintext highlighter-rouge">GenericServlet</code>이 <code class="language-plaintext highlighter-rouge">java.io.Serializable</code>을 구현했다는 것이다. 따라서 <code class="language-plaintext highlighter-rouge">serialVersionUID</code> 변수 값을 설정해야 한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100518583-cbaf7200-31d5-11eb-8dfe-99aef385ea53.png" alt="image" /></p><p>시스템이 멈춰야 하는 경우, <strong>서블릿의 인스턴스 필드 값이 날아가는 것을 막기 위해서</strong> Serializable 인터페이스를 구현하였다.</p><blockquote><p>보통 서블릿에는 인스턴스 필드가 없지만 비유를 하자면 PMS 프로젝트에서의 Service 객체가 해당된다.</p></blockquote><p>객체를 <strong>바이트 배열로 만들어서 상대편에게 보낼 때</strong> <strong>버전이 일치하는 지를 확인</strong>하기 위해서 <strong>시리얼라이즈 넘버</strong>가 필요하다. 서비스 중에 다른 시스템에 이관해야 하는 상황일 때 이 방법을 사용한다. 보통 서비스는 이러한 상황을 대비해 시스템을 이중화시킨다. 실제 실행하는 active 시스템과 예비용인 inactive 시스템을 똑같은 스펙으로 만들 수도 있고, 여유가 없다면 inactive 시스템은 성능이 좀 떨어져도 괜찮다. 어쨌든 inactive 시스템이 없는 것보다는 성능이 떨어지더라도 있는 것이 낫다. 시스템에 문제가 생겨서 멈출 때 inactive 시스템으로 이관할 수 있기 때문이다. 기존에 사용자들이 일을 시키고 있던 것을 inactive 시스템으로 이관한다. 갑자기 다운되면 사용자가 active로 가다가 inactive 로 가게 된다. 그럴 때 기존에 하던 작업은 그대로 가져와야 한다. 실행 중인 값을 그대로 다른 서버로 객체를 보낸다. 다른 서버로 객체를 보낼 때 직렬화를 하고, 바이트배열로 전송한 후 받는 쪽에서는 역직렬화하여 사용한다. 이를 대비해 GenericServlet은 serializable 인터페이스를 구현하였다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Servlet02</span> <span class="kd">extends</span> <span class="nc">GenericServlet</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Servlet02</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet02()"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">res</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet02.service(ServletRequest,ServletResponse)"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>GenericServlet은 구현은 하였으나 다음과 같이 구현 부분이 비어있다. 이 필요하다면 이를 오버라이딩하면 된다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="o">{</span>
<span class="o">}</span>
<span class="kd">public</span> <span class="nc">String</span> <span class="nf">getServletInfo</span><span class="o">()</span> <span class="o">{</span>
  <span class="k">return</span> <span class="s">""</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><h3 id="3-javaxservlethttphttpservlet-추상-클래스-상속">3. <code class="language-plaintext highlighter-rouge">javax.servlet.http.HttpServlet</code> 추상 클래스 상속</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100518761-f9e18180-31d6-11eb-8854-589cbbed6029.png" alt="image" /></p><ul><li><p><strong><code class="language-plaintext highlighter-rouge">javax.servlet.GenericServlet</code> 추상 클래스를 상속</strong> 받았다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">abstract</span> <span class="kd">class</span> <span class="nc">HttpServlet</span>
<span class="kd">extends</span> <span class="nc">GenericServlet</span>
</pre></table></code></div></div><li><p><code class="language-plaintext highlighter-rouge">service()</code> 메서드도 구현했다.</p><li><p><code class="language-plaintext highlighter-rouge">service()</code> 메서드는 웹 브라우저가 요청한 명령에 따라 <code class="language-plaintext highlighter-rouge">doGet()</code>, <code class="language-plaintext highlighter-rouge">doPost()</code>, <code class="language-plaintext highlighter-rouge">doHead()</code>, <code class="language-plaintext highlighter-rouge">doPut()</code> 등을 호출하게 프로그램되어 있다.</p><li><p>특별히 <code class="language-plaintext highlighter-rouge">HTTP</code> 프로토콜 처리 기능을 원할 때는 <code class="language-plaintext highlighter-rouge">HttpServlet</code>을 상속받아 서블릿 클래스를 만든다.</p><li><p><code class="language-plaintext highlighter-rouge">GenericServlet</code> 추상 클래스가 <code class="language-plaintext highlighter-rouge">java.io.Serialize</code> 인터페이스를 구현하였고, <code class="language-plaintext highlighter-rouge">HttpServlet</code> 클래스가 <code class="language-plaintext highlighter-rouge">GenericServlet</code> 추상 클래스를 상속받았으니 HttpServlet 클래스를 상속 받는 이 클래스도 마찬가지로 <code class="language-plaintext highlighter-rouge">serialVersionUID</code> 변수 값을 설정해야 한다.</p><li><p><code class="language-plaintext highlighter-rouge">service()</code>를 오버라이딩하는 대신에 <code class="language-plaintext highlighter-rouge">doGet()</code>, <code class="language-plaintext highlighter-rouge">doPost()</code>, <code class="language-plaintext highlighter-rouge">doHead()</code> 등을 오버라이딩한다.</p></ul><p>호출 과정</p><ul><li>웹 브라우저<ul><li>톰캣 서버<ul><li><code class="language-plaintext highlighter-rouge">Servlet03.service(ServletRequest, ServletResponse)</code><ul><li><code class="language-plaintext highlighter-rouge">Servlet03.service(HttpServletRequest, HttpServlet Response)</code><ul><li><code class="language-plaintext highlighter-rouge">Servlet03.doGet(HttpServletReqeust, HttpServletResponse)</code></ul></ul></ul></ul></ul><blockquote><p><code class="language-plaintext highlighter-rouge">javax</code>는 java extension(extension)의 약자이다.</p></blockquote><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Servlet03</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">res</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Servlet03.doGet(HttpServletRequest,HttpServletResponse)"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>다음은 <strong>HttpServlet</strong>의 <code class="language-plaintext highlighter-rouge">service()</code> 메서드이다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">res</span><span class="o">)</span>
  <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span>
<span class="o">{</span>
  <span class="nc">HttpServletRequest</span>  <span class="n">request</span><span class="o">;</span> <span class="c1">// ServletRequest의 자식 인터페이스</span>
  <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">;</span> <span class="c1">// ServletResponse의 자식 인터페이스</span>

  <span class="c1">// HttpServletRequest의 객체가 아니거나 HttpServletServletResponse가 아니라면 예외를 던진다.</span>
  <span class="k">if</span> <span class="o">(!(</span><span class="n">req</span> <span class="k">instanceof</span> <span class="nc">HttpServletRequest</span> <span class="o">&amp;&amp;</span>
        <span class="n">res</span> <span class="k">instanceof</span> <span class="nc">HttpServletResponse</span><span class="o">))</span> <span class="o">{</span>
    <span class="k">throw</span> <span class="k">new</span> <span class="nf">ServletException</span><span class="o">(</span><span class="s">"non-HTTP request or response"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="c1">// 맞다면 인스턴스 필드에 할당한다.</span>
  <span class="c1">// 이때 형변환을 해야 한다. </span>
  <span class="n">request</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpServletRequest</span><span class="o">)</span> <span class="n">req</span><span class="o">;</span>
  <span class="n">response</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpServletResponse</span><span class="o">)</span> <span class="n">res</span><span class="o">;</span>

  <span class="c1">// </span>
  <span class="n">service</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>실제로는 <code class="language-plaintext highlighter-rouge">service(ServletRequest, ServletResponse)</code>의 파라미터에는 구현체가 넘어온다. 실제로는 HttpServletRequest와 HttpServletResponse를 받는다. 따라서 형변환을 하고 써야 한다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="c1">// 서블릿 컨테이너가 넘기는 빵은 실제로 소보루 빵이다.</span>
<span class="n">먹어라</span> <span class="o">(</span><span class="n">빵</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">소보루빵</span> <span class="n">obj</span> <span class="o">=</span> <span class="o">(</span><span class="n">소보루빵</span><span class="o">)</span> <span class="n">빵</span><span class="o">;</span>
<span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">HttpServlet</code> 클래스는 <code class="language-plaintext highlighter-rouge">service(ServletRequest, ServletResponse)</code> 외에도 파라미터 이름이 다른 메서드를 추가하였다(오버로딩). 이 메서드는 규칙에 맞지 않기 때문에 <code class="language-plaintext highlighter-rouge">service(HttpServletRequest, HttpServletResponse)</code>를 추가하였다. <code class="language-plaintext highlighter-rouge">service(ServletRequest, ServletResponse)</code>는 이 메서드를 내부적으로 호출한다. 그리고 이 메서드는 클라이언트 요청 메서드에 따라 각기 다른 메서드를 호출한다.</p><p><strong>HTTP 요청 메서드(명령어)</strong></p><ul><li>GET<li>HEAD: 콘텐츠의 부가 정보만 줘라<li>POST<li>PUT<li>DELETE<li>CONNECT<li>OPTIONS</ul><p>다음은 <strong>HttpServlet</strong> 추상 클래스의 <strong>service(HttpServletRequest req, HttpServletResponse resp)</strong>의 소스코드이다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre><td class="rouge-code"><pre><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span>
  <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span>
<span class="o">{</span>
  <span class="c1">// HTTP: 메서드</span>
  <span class="nc">String</span> <span class="n">method</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getMethod</span><span class="o">();</span>

  <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_GET</span><span class="o">))</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">lastModified</span> <span class="o">=</span> <span class="n">getLastModified</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">lastModified</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
      <span class="c1">// servlet doesn't support if-modified-since, no reason</span>
      <span class="c1">// to go through further expensive logic</span>
      <span class="n">doGet</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
      <span class="kt">long</span> <span class="n">ifModifiedSince</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getDateHeader</span><span class="o">(</span><span class="no">HEADER_IFMODSINCE</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">ifModifiedSince</span> <span class="o">&lt;</span> <span class="n">lastModified</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// If the servlet mod time is later, call doGet()</span>
        <span class="c1">// Round down to the nearest second for a proper compare</span>
        <span class="c1">// A ifModifiedSince of -1 will always be less</span>
        <span class="n">maybeSetLastModified</span><span class="o">(</span><span class="n">resp</span><span class="o">,</span> <span class="n">lastModified</span><span class="o">);</span>
        <span class="n">doGet</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>
      <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">resp</span><span class="o">.</span><span class="na">setStatus</span><span class="o">(</span><span class="nc">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_MODIFIED</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_HEAD</span><span class="o">))</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">lastModified</span> <span class="o">=</span> <span class="n">getLastModified</span><span class="o">(</span><span class="n">req</span><span class="o">);</span>
    <span class="n">maybeSetLastModified</span><span class="o">(</span><span class="n">resp</span><span class="o">,</span> <span class="n">lastModified</span><span class="o">);</span>
    <span class="n">doHead</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_POST</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">doPost</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_PUT</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">doPut</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_DELETE</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">doDelete</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">);</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_OPTIONS</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">doOptions</span><span class="o">(</span><span class="n">req</span><span class="o">,</span><span class="n">resp</span><span class="o">);</span>

  <span class="o">}</span> <span class="k">else</span> <span class="k">if</span> <span class="o">(</span><span class="n">method</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="no">METHOD_TRACE</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">doTrace</span><span class="o">(</span><span class="n">req</span><span class="o">,</span><span class="n">resp</span><span class="o">);</span>

  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="c1">//</span>
    <span class="c1">// Note that this means NO servlet supports whatever</span>
    <span class="c1">// method was requested, anywhere on this server.</span>
    <span class="c1">//</span>

    <span class="nc">String</span> <span class="n">errMsg</span> <span class="o">=</span> <span class="n">lStrings</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"http.method_not_implemented"</span><span class="o">);</span>
    <span class="nc">Object</span><span class="o">[]</span> <span class="n">errArgs</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Object</span><span class="o">[</span><span class="mi">1</span><span class="o">];</span>
    <span class="n">errArgs</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span> <span class="o">=</span> <span class="n">method</span><span class="o">;</span>
    <span class="n">errMsg</span> <span class="o">=</span> <span class="nc">MessageFormat</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="n">errMsg</span><span class="o">,</span> <span class="n">errArgs</span><span class="o">);</span>

    <span class="n">resp</span><span class="o">.</span><span class="na">sendError</span><span class="o">(</span><span class="nc">HttpServletResponse</span><span class="o">.</span><span class="na">SC_NOT_IMPLEMENTED</span><span class="o">,</span> <span class="n">errMsg</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>다음은 <strong>doGet()</strong> 메서드의 소스코드이다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="kd">protected</span> <span class="kt">void</span> <span class="nf">doGet</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span>
  <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span>
<span class="o">{</span>
  <span class="nc">String</span> <span class="n">protocol</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getProtocol</span><span class="o">();</span>
  <span class="nc">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="n">lStrings</span><span class="o">.</span><span class="na">getString</span><span class="o">(</span><span class="s">"http.method_get_not_supported"</span><span class="o">);</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">protocol</span><span class="o">.</span><span class="na">endsWith</span><span class="o">(</span><span class="s">"1.1"</span><span class="o">))</span> <span class="o">{</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">sendError</span><span class="o">(</span><span class="nc">HttpServletResponse</span><span class="o">.</span><span class="na">SC_METHOD_NOT_ALLOWED</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
  <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
    <span class="n">resp</span><span class="o">.</span><span class="na">sendError</span><span class="o">(</span><span class="nc">HttpServletResponse</span><span class="o">.</span><span class="na">SC_BAD_REQUEST</span><span class="o">,</span> <span class="n">msg</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>만약 클라이언트로부터 GET요청이 들어온다면, <strong>HttpServlet</strong>을 상속받은 자식 객체에서 오버라이딩한 <code class="language-plaintext highlighter-rouge">doGet()</code>을 최종적으로 호출한다. HTTP기능을 사용하기 위해서는 <code class="language-plaintext highlighter-rouge">HttpServlet</code>을 상속받는 것이 좋다.</p><h2 id="리스너-만들기">리스너 만들기</h2><p>리스너는 <strong>서블릿 컨테이너 또는 서블릿, 세션 등의 객체 상태가 변경되었을 때 보고 받는 옵저버</strong>이다. <strong>Observer</strong> 패턴이 적용된 것이다.</p><ul><li><code class="language-plaintext highlighter-rouge">ServletContextListener</code>: <strong>서블릿 컨테이너를 시작하거나 종료할 때</strong> <strong>보고</strong>받고 싶다면 이 인터페이스를 구현한다.<li><code class="language-plaintext highlighter-rouge">ServletRequestListener</code>: <strong>요청</strong>이 들어오거나 종료할 때 보고받고 싶다면 이 인터페이스를 구현한다.<li><code class="language-plaintext highlighter-rouge">HttpSessionListener</code>: <strong>세션</strong>이 생성되거나 종료될 때 보고받고 싶다면 이 인터페이스를 구현한다.<li><code class="language-plaintext highlighter-rouge">XxxListener</code>: 기타 다양한 인터페이스가 있다.</ul><h3 id="리스너-배포하기">리스너 배포하기</h3><p>DD 파일(<code class="language-plaintext highlighter-rouge">web.xml</code>)에 설정하거나 <code class="language-plaintext highlighter-rouge">@WebListener</code> 애노테이션으로 설정하면 된다. 애노테이션으로 설정할 때 Servlet과 달리 이름을 붙이지 않아도 된다. 리스너는 경로로 접근하여 실행할 필요 없이 특정 시점일 때 자동으로 실행되기 때문이다.</p><h3 id="리스너의-용도">리스너의 용도</h3><p>리스너는 <strong>서블릿 컨테이너</strong>나 <strong>세션</strong> 등이 <strong>특별한 상태</strong>일 때 <strong>필요한 작업을 수행</strong>한다.</p><h3 id="servletcontextlistener"><code class="language-plaintext highlighter-rouge">ServletContextListener</code></h3><ul><li><strong>웹 애플리케이션를 시작</strong>할 때 <strong>Spring IoC 컨테이너를 준비</strong>한다.<li>웹 애플리케이션을 시작할 때 <strong>DB 커넥션 풀을 준비</strong>한다.<li><strong>웹 애플리케이션을 종료</strong>할 때 <strong>DB 커넥션 풀에 있는 모든 연결을 해제</strong>한다.</ul><blockquote><p>DB 커넥션 풀? 시스템에 접근하는 사용자가 많아 서버에 부하가 생기는 경우, 시스템의 상황에 따라 성능 이슈가 발생할 확률이 높고 구축한 시스템에 대해 최적화를 해야 하는 상황이 발생하게 되는데 보통 성능 최적화를 위해 테스트하고 확인하는 것 중 하나가 <strong>DB connection pool</strong>과 Thread 개수를 조절하는 것이다.</p></blockquote><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@WebListener</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Listener01</span> <span class="kd">implements</span> <span class="nc">ServletContextListener</span> <span class="o">{</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">contextInitialized</span><span class="o">(</span><span class="nc">ServletContextEvent</span> <span class="n">sce</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 서블릿 컨테이너가 시작될 때 호출된다.</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listener01.contextInitialized()"</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">contextDestroyed</span><span class="o">(</span><span class="nc">ServletContextEvent</span> <span class="n">sce</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 서블릿 컨테이너가 종료될 때 호출된다.</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listener01.contextDestroyed()"</span><span class="o">);</span>
  <span class="o">}</span>
  
<span class="o">}</span>
</pre></table></code></div></div><h3 id="servletrequestlistener"><code class="language-plaintext highlighter-rouge">ServletRequestListener</code></h3><p>요청이 들어올 때 로그 남기기</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nd">@WebListener</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Listener02</span> <span class="kd">implements</span> <span class="nc">ServletRequestListener</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">requestInitialized</span><span class="o">(</span><span class="nc">ServletRequestEvent</span> <span class="n">sre</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 요청이 들어 왔을 때 호출된다.</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listener02.requestInitialized()"</span><span class="o">);</span>
    <span class="nc">HttpServletRequest</span> <span class="n">request</span> <span class="o">=</span> <span class="o">(</span><span class="nc">HttpServletRequest</span><span class="o">)</span> <span class="n">sre</span><span class="o">.</span><span class="na">getServletRequest</span><span class="o">();</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"클라이언트 IP: "</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="na">getRemoteAddr</span><span class="o">());</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"요청 URL: "</span> <span class="o">+</span> <span class="n">request</span><span class="o">.</span><span class="na">getServletPath</span><span class="o">());</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">requestDestroyed</span><span class="o">(</span><span class="nc">ServletRequestEvent</span> <span class="n">sre</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// 요청 처리를 완료할 때 호출된다.</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Listener02.requestDestroyed()"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>Listener02.requestInitialized()
클라이언트 IP: 0:0:0:0:0:0:0:1
요청 URL: /ex01/s03
Servlet03.doGet(HttpServletRequest,HttpServletResponse)
Listener02.requestDestroyed()
</pre></table></code></div></div><p>왜 요청이 들어올 때 로그를 남겨야 할까? 기록을 남겨야지 나중에 누가 해킹했는지 알 수 있기 때문이다.</p><p>리스너는 무조건 특정 객체 상태가 변경될 때 보고를 받는다. 필터에서 로그를 찍어도 된다. 필터와 리스너의 차이점은 필터는 조건을 걸 수 있다는 것이다. 모든 요청에 대해서 로그를 남겨야 할 때는 리스너에서 해당 기능을 구현하고, 특정 요청에 특정 로그를 남겨야 할 때는 필터를 구현한다.</p><p><code class="language-plaintext highlighter-rouge">getServletRequest()</code> 메서드는 <code class="language-plaintext highlighter-rouge">ServletRequest</code> 객체를 리턴하도록 되어 있다. 그러나 실제 객체는 <code class="language-plaintext highlighter-rouge">ServletRequest</code>의 서브 클래스인 <code class="language-plaintext highlighter-rouge">HttpServletRequest</code> 객체이다. <code class="language-plaintext highlighter-rouge">getServletPath()</code>는 <code class="language-plaintext highlighter-rouge">HttpServletRequest</code> 객체의 메서드이기 때문에 <code class="language-plaintext highlighter-rouge">getServletRequest()</code>의 리턴값을 그대로 사용하면 메서드를 쓸 수 없고, 실제 가리키는 객체 타입으로 <strong>형변환을 한 후 메서드를 호출해야 한다.</strong></p><p>그렇다면 왜 굳이 <code class="language-plaintext highlighter-rouge">service(ServletRequest, ServletResponse)</code> 메서드는 <code class="language-plaintext highlighter-rouge">ServletRequest</code>와 <code class="language-plaintext highlighter-rouge">ServletResponse</code>를 파라미터로 받도록 정의되어 있을까? 애초에 인터페이스를 설계할 때 컨테이너가 특정 프로토콜에 구애받지 않고 <code class="language-plaintext highlighter-rouge">service()</code>를 호출하기 위해서 <code class="language-plaintext highlighter-rouge">service(ServletRequest, ServletResponse)</code>로 정의하였다. 그러나 실제로는 <code class="language-plaintext highlighter-rouge">HttpServletRequest</code> 와 <code class="language-plaintext highlighter-rouge">HttpServletResponse</code>만 넘어온다. 서블릿 컨테이너 앞쪽에 통신하는 프로토콜은 99.9% HTTP 프로토콜을 사용하기 때문이다. 즉 어떤 프로토콜이든 마음대로 응용해서 사용할 수 있도록 범용환경에서 사용하게 기획하고 설계하였는데 실제로는 사람들이 HTTP 프로토콜로 소통할 때만 사용한다. 그렇지 않은 경우는 거의 없다.</p><h3 id="필터-만들기">필터 만들기</h3><p>리스너와 필터의 차이점: 필터는 더 정교하게 조건을 걸어 꼽을 수 있다.</p><h4 id="필터의-용도">필터의 용도</h4><ul><li><strong>서블릿을 실행하기 전후</strong>에 꼭 필요한 작업을 수행<li>서블릿 실행 전<ul><li>웹 브라우저가 보낸 <strong>암호화된 파라미터 값</strong>을 <strong>서블릿으로 전달</strong>하기<li>웹 브라우저가 보낸 <strong>압축된 데이터</strong>를 <strong>서블릿으로 전달하기 전</strong>에 <strong>압축 해제</strong>하기<li><strong>서블릿의 실행을 요청할 권한이 있는지 검사</strong>하기<li><strong>로그인 사용자인지 검사</strong>하기<li><strong>로그 남기기</strong></ul><li>서블릿 실행 후<ul><li><strong>클라이언트로 보낼 데이터</strong>를 <strong>압축</strong>하기<li>클라이언트로 보낼 데이터를 <strong>암호화</strong>하기</ul><li><p><code class="language-plaintext highlighter-rouge">init(FilterConfig filterConfig) throws ServletException</code></p><ul><li>필터 객체를 생성한 후 <strong>제일 처음으로 호출</strong>된다.<li><strong>필터가 사용할 자원</strong>을 이 메서드에서 준비한다.<li><strong>웹 애플리케이션을 시작</strong>할 때 <strong>필터는 자동 생성</strong>된다.</ul><li><p><code class="language-plaintext highlighter-rouge">destroy()</code></p><ul><li><strong>웹 애플리케이션이 종료</strong>될 때 <strong>호출</strong>된다.<li><code class="language-plaintext highlighter-rouge">init()</code>에서 <strong>준비한 자원을 해제</strong>한다.</ul><li><p><code class="language-plaintext highlighter-rouge">doFilter(SerlvetRequest, ServletResponse, FilterChain) throws ServletException</code></p><ul><li><p>요청이 들어올 때마다 호출된다.</p><li><p>단 필터를 실행할 때 지정된 URL의 요청에만 호출된다.</p><li><p>서블릿이 실행되기 전에 필터가 먼저 실행된다.</p><li><p>서블릿을 실행한 후 다시 필터로 리턴한다.</p><li><p><code class="language-plaintext highlighter-rouge">chain.doFilter(request, response);</code></p><p>다음 필터를 실행한다. 만약 다음 필터가 없으면 요청한 서블릿의 <code class="language-plaintext highlighter-rouge">service()</code> 메서드를 호출한다. <code class="language-plaintext highlighter-rouge">service()</code> 메서드 호출이 끝나면 리턴된다</p></ul></ul><h4 id="필터-만들기-1">필터 만들기</h4><ul><li><code class="language-plaintext highlighter-rouge">javax.servlet.Filter</code> 인터페이스 규칙에 따라 작성한다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Filter01</span> <span class="kd">implements</span> <span class="nc">Filter</span> <span class="o">{</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">init</span><span class="o">(</span><span class="nc">FilterConfig</span> <span class="n">filterConfig</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">ServletException</span> <span class="o">{</span>
    <span class="c1">// 필터 객체를 생성한 후 가장 먼저 호출된다.</span>
    <span class="c1">// 필터가 사용할 자원 준비</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Filter01.init()"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">destroy</span><span class="o">()</span> <span class="o">{</span>
    <span class="c1">// 웹앱 종료 시 호출된다. 자원 해제</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Filter01.destroy()"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">doFilter</span><span class="o">(</span>
    <span class="nc">ServletRequest</span> <span class="n">request</span><span class="o">,</span>
    <span class="nc">ServletResponse</span> <span class="n">response</span><span class="o">,</span>
    <span class="nc">FilterChain</span> <span class="n">chain</span><span class="o">)</span>
    <span class="kd">throws</span> <span class="nc">IOException</span><span class="o">,</span> <span class="nc">ServletException</span> <span class="o">{</span>
    <span class="c1">// 요청이 들어 올 때 마다 호출된다.</span>
    <span class="c1">// =&gt; 단 필터를 설정할 때 지정된 URL의 요청에만 호출된다.</span>
    <span class="c1">// =&gt; 서블릿이 실행되기 전에 필터가 먼저 실행된다.</span>
    <span class="c1">// =&gt; 서블릿을 실행한 후 다시 필터로 리턴한다.</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Filter01.doFilter() : 시작"</span><span class="o">);</span>

    <span class="c1">// 다음 필터를 실행한다.</span>
    <span class="c1">// 만약 다음 필터가 없으면,</span>
    <span class="c1">// 요청한 서블릿의 service() 메서드를 호출한다.</span>
    <span class="c1">// service() 메서드 호출이 끝나면 리턴된다.</span>
    <span class="n">chain</span><span class="o">.</span><span class="na">doFilter</span><span class="o">(</span><span class="n">request</span><span class="o">,</span> <span class="n">response</span><span class="o">);</span>

    <span class="c1">// 체인에 연결된 필터나 서블릿이 모두 실행된 다음에</span>
    <span class="c1">// 다시 이 필터로 리턴될 것이다.</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Filter01.doFilter() : 종료"</span><span class="o">);</span>
  <span class="o">}</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100054109-c617fc00-2e64-11eb-90eb-71df01a53e85.png" alt="image" /></p><p>이전 PMS 프로젝트에서 필터를 구현하였을 때, 무조건 요청에 따라 무조건 필터를 실행하도록 만들었으나, Servlet API를 이용하면 필터는 요청에 따라 실행 여부를 결정할 수 있다.</p><h4 id="필터-배포하기">필터 배포하기</h4><p>DD 파일(<code class="language-plaintext highlighter-rouge">web.xml</code>)에 설정하거나 애노테이션으로 설정하면 된다.</p><p><strong>DD 파일에 설정</strong></p><div class="language-xml highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="c">&lt;!-- 필터 등록 --&gt;</span>
  <span class="nt">&lt;filter&gt;</span>
    <span class="nt">&lt;filter-name&gt;</span>Filter01<span class="nt">&lt;/filter-name&gt;</span>
    <span class="nt">&lt;filter-class&gt;</span>com.eomcs.web.ex02.Filter01<span class="nt">&lt;/filter-class&gt;</span>
  <span class="nt">&lt;/filter&gt;</span>
<span class="c">&lt;!-- 필터를 적용할 URL을 지정 --&gt;</span>
  <span class="nt">&lt;filter-mapping&gt;</span>
    <span class="nt">&lt;filter-name&gt;</span>Filter01<span class="nt">&lt;/filter-name&gt;</span>
    <span class="nt">&lt;url-pattern&gt;</span>/ex02/s1<span class="nt">&lt;/url-pattern&gt;</span>
  <span class="nt">&lt;/filter-mapping&gt;</span>
</pre></table></code></div></div><p>위의 코드에서 필터는 클라이언트가 <code class="language-plaintext highlighter-rouge">/ex02/s1</code> 요청을 할 때에만 이 필터를 실행한다.</p><blockquote><p>web.xml 변경 시 서버를 재시작해야 한다.</p></blockquote><p>필터는 클라이언트가 요청하기 전에 필터 객체를 미리 준비한다. 이는 서블릿과 구분되는 차이점이다. 딱 한번만 호출된다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>Listener01.contextInitialized()
Filter01.init()
</pre></table></code></div></div><p>필터를 적용하지 않은 URL에 접근했을 때 실행 결과</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre>Listener02.requestInitialized()
클라이언트 IP: 0:0:0:0:0:0:0:1
요청 URL: /ex02/a/s2
/ex02/a/s2 서블릿 실행!
Listener02.requestDestroyed()
</pre></table></code></div></div><p>필터를 적용한 URL에 접근했을 때 실행 결과</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre>Listener02.requestInitialized()
클라이언트 IP: 0:0:0:0:0:0:0:1
요청 URL: /ex02/s1
Filter01.doFilter() : 시작
/ex02/s1 서블릿 실행!
Filter01.doFilter() : 종료
Listener02.requestDestroyed()
</pre></table></code></div></div><h4 id="필터-실행-순서">필터 실행 순서</h4><ul><li>필터의 실행 순서를 임의로 조정할 수 없다.<li>필터를 정의할 때 필터 순서에 의존하는 방식으로 프로그래밍하지 말자.<li>필터의 실행 순서에 상관없이 각 필터가 독립적으로 동작하도록 작성하자.</ul><p>필터의 에노테이션에 와일드카드를 지정할 수 있다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nd">@WebFilter</span><span class="o">(</span><span class="s">"/ex02/*"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Filter02</span> <span class="kd">implements</span> <span class="nc">Filter</span> <span class="o">{</span>
</pre></table></code></div></div><div class="language-console highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="go">Listener02.requestInitialized()
클라이언트 IP: 0:0:0:0:0:0:0:1
요청 URL: /ex02/s1
Filter01.doFilter() : 시작
Filter02.doFilter() : 시작
/ex02/s1 서블릿 실행!
Filter02.doFilter() : 종료
Filter01.doFilter() : 종료
Listener02.requestDestroyed()
</span></pre></table></code></div></div><h2 id="클라이언트로-출력하기">클라이언트로 출력하기</h2><h3 id="한글-깨짐-현상-처리">한글 깨짐 현상 처리</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100055225-d8933500-2e66-11eb-8843-e068179a1630.png" alt="image" /></p><p><strong>출력 스트림을 꺼내기 전</strong>에 <strong>출력할 때 사용할 문자표(charset)를 지정하지 않으면</strong> 리턴받은 출력 스트림은 기본 문자표 <strong>ISO-8859-1</strong>을 사용한다. 즉 자바의 유니코드 문자를 ISO-8859-1문자표에 따라 변환하여 출력한다.영어 유니코드 문자는 ISO-8859-1 문자표에 있기 때문에 제대로 변환된다. 그 아래 유니코드 문자는 ISO-8859-1 문자표에 없기 때문에 없다는 의미에서 ‘?’ 문자로 바뀌어 출력된다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/ex03/s1"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Servlet01</span> <span class="kd">extends</span> <span class="nc">GenericServlet</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">res</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>

    <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Hello!"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"안녕하세요!"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"こんにちは"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"您好"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"مع السلامة؛ إلى اللقاء!"</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100054736-fd3add00-2e65-11eb-871d-d27997606c59.png" alt="image" /></p><p><code class="language-plaintext highlighter-rouge">res.setContentType("MIME Type;charset=문자표이름");</code></p><p>따라서 출력 스트림을 꺼내기 전에 출력 스트림이 사용할 문자표(charset)를 지정해야 한다. 한글이나 아랍문자, 중국문자, 일본문자는 UTF-8 문자표에 정의되어 있기 때문에 UTF-8 문자로 변환할 수 있다. MS949로도 할 수 있지만 국제 표준이 아니기 때문에 사용하지 말자.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">res</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/plain;charset=UTF-8"</span><span class="o">);</span> <span class="c1">// UCS2(UTF-16) ==&gt; UTF-8</span>
<span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100055791-c796f380-2e67-11eb-8e5b-fde6785af2ac.png" alt="image" /></p><h3 id="mime-type-multi-purpose-internet-mail-extension">MIME Type: Multi-purpose Internet Mail Extension</h3><ul><li>콘텐트의 형식을 표현<li>콘텐트타입/상세타입<li>예: text/plain, text/css, text/html</ul><p>웹 브라우저는 콘텐츠를 출력할 때 서버가 알려준 MIME 타입을 보고 어떤 방식으로 출력할 지 결정한다.</p><p>윈도우 운영체제에서는 <em>파일 확장자</em>를 통해 해당 파일이 어떤 파일인지 알수 있다. 확장자와 마찬가지로 MIME type은 파일 안에 들어 있는 콘텐트가 어떤 콘텐트인지 표현하는 문법이다. 초창기에 메일을 주고받을 때 보내는 파일이 어떤 파일인 지 알려주기 위해서 사용하기 시작했다. 그러나 오늘날에는 파일을 주고받는 모든 곳에 사용한다(확장되었다). 인터넷 상에서 주고받는 콘텐트가 무엇인지를 지정한다.</p><p>앞에서는 MIME타입을 <code class="language-plaintext highlighter-rouge">text/plain</code>으로 지정했는데 MIME타입을 html로 바꾸어보자.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">res</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/plain;charset=UTF-8"</span><span class="o">)</span>
</pre></table></code></div></div><p>서버가 콘텐츠 타입을 html로 설정한다면 브라우저도 어떤 방식으로 출력할 지 결정한다. 이렇게 보내는 데이터에 앞서서 부가적인 데이터를 보내주는 것을 헤더라고 한다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100056237-a71b6900-2e68-11eb-8ca1-6663ec49ac12.png" alt="image" /></p><p>소스는 바뀌지 않았지만 출력 형식이 달라졌다. 줄바꿈 기호가 들어가지 않은 이유는 HTML에서는 특별히 태그를 지정하지 않는 이상 줄바꿈기호를 출력 때 반영하지 않기 때문이다.</p><h3 id="html-출력하기">HTML 출력하기</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/ex03/s3"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Servlet03</span> <span class="kd">extends</span> <span class="nc">GenericServlet</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">res</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>

    <span class="c1">// HTML 출력할 때 MIME 타입에 HTML을 지정하지 않으면</span>
    <span class="c1">// 웹 브라우저는 일반 텍스트로 간주하여 출력한다.</span>
    <span class="n">res</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/pain;charset=UTF-8"</span><span class="o">);</span> <span class="c1">// UTF-16 ==&gt; UTF-8</span>
    <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>

    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;!DOCTYPE html&gt;"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;html&gt;"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;head&gt;&lt;title&gt;servlet03&lt;/title&gt;&lt;/head&gt;"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;body&gt;&lt;h1&gt;안녕하세요&lt;/h1&gt;&lt;/body&gt;"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/html&gt;"</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100056309-d03bf980-2e68-11eb-947a-98c938510c07.png" alt="image" /></p><p>MIME 타입을 html로 바꿔 HTML규칙에 맞춰서 렌더링하라고 요청하자. 결과는 다음과 같다.</p><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100056404-fcf01100-2e68-11eb-8794-8bf90bb12405.png" alt="image" /></p><h3 id="바이너리-데이터-출력하기">바이너리 데이터 출력하기</h3><p>각각의 객체를 사람으로 생각해라. 담당자에게 물어본다. <code class="language-plaintext highlighter-rouge">/photo.jpeg</code>에서 <code class="language-plaintext highlighter-rouge">/</code>(루트)는 애플리케이션 루트를 의미한다. <code class="language-plaintext highlighter-rouge">.metadata.org~. tmp1.wtpwebapps/...</code></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/ex03/s4"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">Servlet04</span> <span class="kd">extends</span> <span class="nc">GenericServlet</span> <span class="o">{</span>

  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">ServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">ServletResponse</span> <span class="n">res</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>

    <span class="c1">// /WEB-INF/photo.jpeg 파일의 실제 경로 알아내기</span>
    <span class="c1">// 1) 서블릿의 환경 정보를 다루는 객체를 먼저 얻는다.</span>
    <span class="nc">ServletContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">req</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">();</span>

    <span class="c1">// 2) ServletContext를 통해 웹 자원의 실제 경로를 알아낸다.</span>
    <span class="c1">// =&gt; getRealPath(현재 웹 애플리케이션의 파일 경로) : 실제 전체 경로를 리턴한다.</span>
    <span class="nc">String</span> <span class="n">path</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getRealPath</span><span class="o">(</span><span class="s">"/photo.jpeg"</span><span class="o">);</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>

    <span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="n">path</span><span class="o">);</span>

    <span class="c1">// 바이너리를 출력할 때 MIME 타입을 지정해야 웹 브라우저가 제대로 출력할 수 있다.</span>
    <span class="c1">// =&gt; 웹 브라우저가 모르는 형식을 지정하면 웹 브라우저는 처리하지 못하기 때문에</span>
    <span class="c1">// 그냥 다운로드 대화상자를 띄운다.</span>
    <span class="n">res</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"image/jpeg"</span><span class="o">);</span>

    <span class="nc">BufferedOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedOutputStream</span><span class="o">(</span><span class="n">res</span><span class="o">.</span><span class="na">getOutputStream</span><span class="o">());</span>

    <span class="kt">int</span> <span class="n">b</span><span class="o">;</span>
    <span class="k">while</span> <span class="o">((</span><span class="n">b</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="n">out</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span> <span class="c1">// 버퍼 데코레이터에 보관된 데이터를 클라이언트로 방출한다.</span>
    <span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
    <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>받는 쪽에서 다운로드가 나온다면 MIME Type을 실수한 것이다. 만약 MIME타입을 <code class="language-plaintext highlighter-rouge">image/ohora</code> 처럼 잘못 설정한다면 다운로드 창이 나오거나 다운로드가 된다. 그리고 텍스트 파일을 <code class="language-plaintext highlighter-rouge">text/ohora</code>처럼 잘못 설정한다면 텍스트 그 자체가 나온다. (html형식으로 되어 있다면 html코드가 그대로 출력된다) 그리고 만약 <code class="language-plaintext highlighter-rouge">toxt/ohora</code>로 잘못 입력하면 text인지 조차 모르기 때문에 화면에 출력하는 것이 아니라 다운로드가 된다. MIME타입은 브라우저에게 지금 컨텐츠의 타입이 어떤지 알려주는 것이다. 브라우저는 타입대로 출력을 할 뿐이다.</p><blockquote><p>코드를 읽으면 안된다. 코드의 의미를 파악할 수 있어야 한다. 도구나 사람같이 비유하자. 여기서 무언가 얻을 때 (<code class="language-plaintext highlighter-rouge">getServletContext</code>, <code class="language-plaintext highlighter-rouge">getRealPath</code>) 이것을 관리하는 담당자 객체를 사용하여 얻었다.</p></blockquote><h2 id="pms">PMS</h2><p>PMS 프로젝트에서 <code class="language-plaintext highlighter-rouge">BoardListCommand</code>부터 <code class="language-plaintext highlighter-rouge">HttpServlet</code> 객체를 상속받도록 만든다. <code class="language-plaintext highlighter-rouge">execute(Request)</code>를 <code class="language-plaintext highlighter-rouge">Servlet API</code>에 정의된 대로 <code class="language-plaintext highlighter-rouge">service(HttpServletRequest request, HttpServletResponse response)</code>로 바꾼다. 이전에 <code class="language-plaintext highlighter-rouge">Map&lt;String, Object&gt; context</code>를 <code class="language-plaintext highlighter-rouge">Request</code> 객체에서 꺼내 썼듯이, 여기서 context도 <code class="language-plaintext highlighter-rouge">SerlvetRequest</code> 객체에서 꺼내 쓴다. 다만 여기서는 <code class="language-plaintext highlighter-rouge">context</code>의 타입이 <code class="language-plaintext highlighter-rouge">Map</code>이 아니라 <code class="language-plaintext highlighter-rouge">ServletContext</code> 타입이다. 그리고 <code class="language-plaintext highlighter-rouge">ctx</code>에서 <code class="language-plaintext highlighter-rouge">boardService</code>라는 속성으로 저장했던 객체 <code class="language-plaintext highlighter-rouge">BoardService</code>를 거낸다. <code class="language-plaintext highlighter-rouge">ctx.getAttribute()</code> 메서드를 사용하면 된다.</p><p><code class="language-plaintext highlighter-rouge">ServletResponse</code> 객체에서 <code class="language-plaintext highlighter-rouge">getWriter()</code>를 호출해 <code class="language-plaintext highlighter-rouge">PrintWriter out</code> 객체를 꺼내기 전에, 반드시 한글이 깨지지 않도록 <code class="language-plaintext highlighter-rouge">reponse.setContentType()</code>를 호출하여 UTF-8로 charset을 정의하고, MIME type을 html로 지정한다. 그리고 이전에는 콘솔에 출력했기 때문에 그대로 출력하면 되었지만, 브라우저에서 사용하는 HTML 형식에 맞춰 작성해야 한다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
</pre><td class="rouge-code"><pre><span class="nd">@WebServlet</span><span class="o">(</span><span class="s">"/board/list"</span><span class="o">)</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">BoardListCommand</span> <span class="kd">extends</span> <span class="nc">HttpServlet</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">1L</span><span class="o">;</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">request</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">response</span><span class="o">)</span>
      <span class="kd">throws</span> <span class="nc">ServletException</span><span class="o">,</span> <span class="nc">IOException</span> <span class="o">{</span>

    <span class="nc">ServletContext</span> <span class="n">ctx</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="na">getServletContext</span><span class="o">();</span>
    <span class="nc">BoardService</span> <span class="n">boardService</span> <span class="o">=</span>
        <span class="o">(</span><span class="nc">BoardService</span><span class="o">)</span> <span class="n">ctx</span><span class="o">.</span><span class="na">getAttribute</span><span class="o">(</span><span class="s">"boardService"</span><span class="o">);</span>

    <span class="n">response</span><span class="o">.</span><span class="na">setContentType</span><span class="o">(</span><span class="s">"text/html;charset=UTF-8"</span><span class="o">);</span>
    <span class="nc">PrintWriter</span> <span class="n">out</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="na">getWriter</span><span class="o">();</span>

    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;!DOCTYPE html&gt;"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;html&gt;"</span><span class="o">);</span>
    <span class="k">try</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;head&gt;&lt;title&gt;게시글목록&lt;/title&gt;&lt;/head&gt;"</span><span class="o">);</span>
      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;body&gt;&lt;h1&gt;게시글목록&lt;/h1&gt;&lt;/body&gt;"</span><span class="o">);</span>

      <span class="nc">List</span><span class="o">&lt;</span><span class="nc">Board</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">boardService</span><span class="o">.</span><span class="na">list</span><span class="o">();</span>

      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;body&gt;"</span><span class="o">);</span>
      
      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;table&gt;&lt;tr&gt;"</span><span class="o">);</span>
      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;th&gt;번호&lt;/th&gt;&lt;th&gt;제목&lt;/th&gt;&lt;th&gt;작성자&lt;/th&gt;&lt;th&gt;등록일&lt;/th&gt;&lt;th&gt;조회수&lt;/th&gt;"</span><span class="o">);</span>
      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/tr&gt;"</span><span class="o">);</span>
      <span class="k">for</span> <span class="o">(</span><span class="nc">Board</span> <span class="n">board</span> <span class="o">:</span> <span class="n">list</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"&lt;td&gt;%d&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%s&lt;/td&gt;&lt;td&gt;%d&lt;/td&gt;\n"</span><span class="o">,</span>
            <span class="n">board</span><span class="o">.</span><span class="na">getNo</span><span class="o">(),</span>
            <span class="n">board</span><span class="o">.</span><span class="na">getTitle</span><span class="o">(),</span>
            <span class="n">board</span><span class="o">.</span><span class="na">getWriter</span><span class="o">().</span><span class="na">getName</span><span class="o">(),</span>
            <span class="n">board</span><span class="o">.</span><span class="na">getRegisteredDate</span><span class="o">(),</span>
            <span class="n">board</span><span class="o">.</span><span class="na">getViewCount</span><span class="o">());</span>
        <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/tr&gt;"</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;table&gt;"</span><span class="o">);</span>
      
    <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"&lt;p&gt;작업 처리 중 오류 발생! - %s&lt;/p&gt;\n"</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getMessage</span><span class="o">());</span>
      <span class="nc">StringWriter</span> <span class="n">errOut</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringWriter</span><span class="o">();</span>
      <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">(</span><span class="k">new</span> <span class="nc">PrintWriter</span><span class="o">(</span><span class="n">errOut</span><span class="o">));</span>
      <span class="n">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"&lt;pre&gt;%s&lt;/pre&gt;\n"</span><span class="o">,</span> <span class="n">errOut</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
    <span class="o">}</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/body&gt;"</span><span class="o">);</span>
    <span class="n">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"&lt;/html&gt;"</span><span class="o">);</span>
  <span class="o">}</span>

<span class="o">}</span>

</pre></table></code></div></div><h3 id="project와-배포-폴더">project와 배포 폴더</h3><p><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-src="https://user-images.githubusercontent.com/50407047/100536256-c1878500-3262-11eb-9581-ea8e4f2c17d4.png" alt="image" /></p><p>자바 프로젝트에서 <code class="language-plaintext highlighter-rouge">src/main/java</code> 밑 소스 파일들은 컴파일되고 클래스파일이 생성된다. 이 클래스 파일들과 <code class="language-plaintext highlighter-rouge">src/main/resources</code>에 있는 파일(mapper 파일 등)은 배포 폴더(<code class="language-plaintext highlighter-rouge">wtpwebapp</code>)의 <code class="language-plaintext highlighter-rouge">/project/WEB-INF/class</code> 폴더에 놓인다. <code class="language-plaintext highlighter-rouge">src/main/webapp/</code> 밑의 파일(HTML, images 파일 등)은 <code class="language-plaintext highlighter-rouge">/project</code> 폴더=에 바로 위치한다. 또한 의존 라이브러리는 <code class="language-plaintext highlighter-rouge">/WEB-INF/lib/</code> 폴더 아래에 놓인다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/bitcamp/'>bitcamp</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/bitcamp/" class="post-tag no-text-decoration" >bitcamp</a> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환 - 하연&url=https://hayeon17kim.github.io//posts/201124-86/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환 - 하연&u=https://hayeon17kim.github.io//posts/201124-86/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환 - 하연&url=https://hayeon17kim.github.io//posts/201124-86/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/system-deisign-capacity-estimation/">System Design: Capacity Estimate</a><li><a href="/posts/today-i-learned-2021-04-27/">주니어 성장일기: 2021.04.27</a><li><a href="/posts/today-i-learned-2021-04-26/">주니어 성장일기: 2021.04.26</a><li><a href="/posts/fastcampus-01/">자료구조와 알고리즘이란</a><li><a href="/posts/today-i-learned-2021-04-25/">주니어 성장일기: 2021.04.25</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble-shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/201123-85/"><div class="card-body"> <span class="timeago small" > Nov 23, 2020 <i class="unloaded">2020-11-23T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #85일차:서블릿 프로그래밍, WAS, JavaEE와 Servlet 컨테이너, Servlet 인터페이스의 Life-cycle 메서드</h3><div class="text-muted small"><p> 서블릿 프로그래밍 웹 애플리케이션 서버 아키텍쳐의 개념 JavaEE와 Servlet API의 관계 JavaEE 구현체와 서블릿 컨테이너의 관계 eomcs-web-project/src-00 예제 실습 Servlet 인터페이스와 Life-cycle 메서드 WAS(Web Application Server) 아키텍처 이전까지는 사...</p></div></div></a></div><div class="card"> <a href="/posts/201125-87/"><div class="card-body"> <span class="timeago small" > Nov 25, 2020 <i class="unloaded">2020-11-25T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #87일차: HTML 태그 사용법</h3><div class="text-muted small"><p> HTML/CSS 학습법: 결과 화면 먼저 보고 소스코드를 확인하자 UI와 UX UX(User Experience; 사용자 경험): 사용자 편의성 ex: 링크에 hover했을 때 커서가 손모양으로 바뀌어야 한다. UI(User Interface): 기능을 하는 화면이 있는가 HTML ...</p></div></div></a></div><div class="card"> <a href="/posts/201126-88/"><div class="card-body"> <span class="timeago small" > Nov 26, 2020 <i class="unloaded">2020-11-26T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #88일차: 서블릿 프로그래밍</h3><div class="text-muted small"><p> com.eomcs.web.ex04 클라이언트가 보낸 데이터 읽기 GET 요청 데이터 읽기 웹 브라우저에 URL을 입력한 후 엔터를 치면 GET 요청이다. 웹 페이지에서 링크를 클릭하면(자바스크립트 처리하지 않은 상태) GET 요청을 보낸다. 웹 페이지의 폼(method=’GET’일 때)에서 전송 버튼을 클릭하면 GET 요청을...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/devil-03/" class="btn btn-outline-primary" prompt="Older"><p>DEVIL: mysql의 datatime 타입과 java.util.Date 클래스</p></a> <a href="/posts/201125-87/" class="btn btn-outline-primary" prompt="Newer"><p>학원 #87일차: HTML 태그 사용법</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//hayeon17kim-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = '학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환'; this.page.url = 'https://hayeon17kim.github.io//posts/201124-86/'; this.page.identifier = '/posts/201124-86/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('.post-content img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/MONI56219559">hayeon_kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://hayeon17kim.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
