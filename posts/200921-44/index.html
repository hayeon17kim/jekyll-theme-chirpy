<!DOCTYPE html><html lang="kr-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="학원 #44일차: 파일 입출력: byte stream" /><meta name="author" content="hayeon_kim" /><meta property="og:locale" content="kr_KR" /><meta name="description" content="데이터 출력" /><meta property="og:description" content="데이터 출력" /><link rel="canonical" href="https://hayeon17kim.github.io//posts/200921-44/" /><meta property="og:url" content="https://hayeon17kim.github.io//posts/200921-44/" /><meta property="og:site_name" content="하연" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-09-21T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="학원 #44일차: 파일 입출력: byte stream" /><meta name="twitter:site" content="@MONI56219559" /><meta name="twitter:creator" content="@hayeon_kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"hayeon_kim"},"headline":"학원 #44일차: 파일 입출력: byte stream","dateModified":"2020-09-21T00:00:00+08:00","datePublished":"2020-09-21T00:00:00+08:00","description":"데이터 출력","url":"https://hayeon17kim.github.io//posts/200921-44/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hayeon17kim.github.io//posts/200921-44/"},"@context":"https://schema.org"}</script><title>학원 #44일차: 파일 입출력: byte stream | 하연</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-173202420-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-173202420-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/bio-photo.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">하연</a></div><div class="site-subtitle font-italic">어제보다 나은 코드를 위해</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-laptop-code ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/hayeon17kim" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/MONI56219559" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hayeon17kim','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>학원 #44일차: 파일 입출력: byte stream</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>학원 #44일차: 파일 입출력: byte stream</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Sep 21, 2020, 12:00 AM +0800" > Sep 21, 2020 <i class="unloaded">2020-09-21T00:00:00+08:00</i> </span> by <span class="author"> hayeon_kim </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="5186 words">28 min</span></div></div><div class="post-content"><h1 id="데이터-출력">데이터 출력</h1><blockquote><p>eomcs.java.io.ex04</p></blockquote><h2 id="int-입출력">int 입출력</h2><h3 id="1바이트만-입출력">1바이트만 입출력</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">money</span> <span class="o">=</span> <span class="mi">1_3456_7890</span><span class="o">;</span> <span class="c1">// = 0x080557d2</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">money</span><span class="o">);</span> <span class="c1">//항상 출력할 때는 맨 끝 1바이트만 출력한다.</span>
</pre></table></code></div></div><ul><li><p>위의 코드를 실행하여 출력한 데이터를 InputStream.read()로 읽는다.</p><li><p>read()는 1바이트를 읽어 int 값으로 만든 후 리턴한다.</p></ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span> <span class="c1">// 실제 리턴한 값은 0xD2이다.</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%1$x(%1$d)\n"</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span> <span class="c1">// d2(210)</span>
</pre></table></code></div></div><h3 id="모든-바이트-입출력">모든 바이트 입출력</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre><td class="rouge-code"><pre><span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="kt">int</span> <span class="n">money</span> <span class="o">=</span> <span class="mi">1_3456_7890</span><span class="o">;</span> <span class="c1">// = 0x080557d2</span>

<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="o">);</span> <span class="c1">// 00000008|0557d2</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="o">);</span> <span class="c1">// 00000805|57d2</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="o">);</span>  <span class="c1">// 00080557|d2</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">money</span><span class="o">);</span>       <span class="c1">// 080557d2</span>
</pre></table></code></div></div><ul><li>위의 코드를 실행하여 출력한 데이터를 read()로 읽는다.<li>파일에서 4바이트를 읽어 4바이트 int 변수에 저장한다.<li>읽은 바이트를 비트 이동 연산자로 값을 이동시킨 후 변수에 저장해야 한다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>   <span class="c1">// 00000008 =&gt; 08000000</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">);</span>    <span class="c1">// 00000005 =&gt; 00050000 +</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">);</span>     <span class="c1">// 00000057 =&gt; 00005700 +</span>
<span class="n">value</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>            <span class="c1">// 000000d2 =&gt; 000000d2 +</span>
											       <span class="c1">//             080557d2</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%x\n"</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span> <span class="c1">//80557d2</span>
</pre></table></code></div></div><h2 id="long-입출력">long 입출력</h2><h3 id="모든-바이트-입출력-1">모든 바이트 입출력</h3><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="kt">long</span> <span class="n">money</span> <span class="o">=</span> <span class="mi">400_0000_0000_0000L</span><span class="o">;</span> <span class="c1">// = 0x00016bcc41e90000</span>

<span class="c1">// long 메모리의 모든 바이트를 출력하려면,</span>
<span class="c1">// 각 바이트를 맨 끝으로 이동한 후 write()로 출력한다.</span>
<span class="c1">// 왜? write()는 항상 변수의 마지막 1바이트만 출력하기 때문이다.</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">56</span><span class="o">));</span> <span class="c1">// 0000000000000000|016bcc41e90000</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">48</span><span class="o">));</span> <span class="c1">// 0000000000000001|6bcc41e90000</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">40</span><span class="o">));</span> <span class="c1">// 000000000000016b|cc41e90000</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span><span class="o">));</span> <span class="c1">// 0000000000016bcc|41e90000</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="o">));</span> <span class="c1">// 00000000016bcc41|e90000</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="o">));</span> <span class="c1">// 000000016bcc41e9|0000</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">money</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="o">));</span>  <span class="c1">// 0000016bcc41e900|00</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)</span><span class="n">money</span><span class="o">);</span>         <span class="c1">// 00016bcc41e90000|</span>
</pre></table></code></div></div><ul><li>위 코드를 실행하여 출력한 데이터를 read()로 읽는다.<li>파일에서 8바이트를 읽어서 8바이트 long 변수에 저장한다.</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="c1">// =&gt; 파일에 들어 있는 값 예: 00016bcc41e90000</span>
<span class="kt">long</span> <span class="n">value</span> <span class="o">=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">56</span><span class="o">;</span>   
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">48</span><span class="o">;</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">40</span><span class="o">;</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="o">;</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>     
<span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>            

<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%x\n"</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span>
</pre></table></code></div></div><h2 id="string-입출력">String 입출력</h2><p><code class="language-plaintext highlighter-rouge">str.getBytes(문자코드표)</code></p><ul><li>문자열을 지정한 문자 코드표에 따라 인코딩하여 바이트 배열을 만든다.<li><code class="language-plaintext highlighter-rouge">str.getBytes("UTF-8")</code>: UCS2 문자 =&gt; UTF-8 문자</ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="s">"AB가각간"</span><span class="o">;</span>
<span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">));</span>
</pre></table></code></div></div><ul><li>위의 코드의 실행 결과로 만든 파일을 읽는다.<li>바이트 배열에 들어 있는 값을 사용하여 String 인스턴스를 만든다.<li><code class="language-plaintext highlighter-rouge">new String(바이트배열, 시작번호, 개수, 문자코드표)</code></ul><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test3.data"</span><span class="o">);</span>
<span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">100</span><span class="o">];</span>
<span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
<span class="nc">String</span> <span class="n">str</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">count</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s\n"</span><span class="o">,</span> <span class="n">str</span><span class="o">);</span> <span class="c1">//AB가각간</span>
</pre></table></code></div></div><h2 id="인스턴스-입출력">인스턴스 입출력</h2><h3 id="fileiostream-사용">FileIOStream 사용</h3><p>인스턴스의 값을 출력하는 코드</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
  <span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test4.data"</span><span class="o">);</span>
  
  <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
  <span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"AB가각간"</span><span class="o">;</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="mi">27</span><span class="o">;</span>
  <span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
  
  <span class="c1">// 인스턴스의 값을 출력하라!</span>
  <span class="c1">// 이름 출력</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">member</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span>
  
  <span class="c1">// 나이 출력</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="o">);</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">);</span>
  
  <span class="c1">// 성별 출력</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>파일의 데이터를 읽어 인스턴스로 만들기</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
  <span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test4.data"</span><span class="o">);</span>
  
  <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
  
  <span class="c1">// 이름(String) 읽기</span>
  <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span> <span class="c1">// 이름이 저장될 바이트 배열의 수</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
  <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span> <span class="c1">// 이름 배열 개수 만큼 바이트를 읽어 배열에 저장</span>
  <span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  
  <span class="c1">// 나이(int) 읽기</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
  <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
  
  <span class="c1">// 성별(boolean) 읽기</span>
  <span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">);</span>
<span class="o">}</span>
</pre></table></code></div></div><p>FileInput/OutputStream 객체를 생성해서 메서드를 사용해도 읽거나 출력할 <strong>데이터의 타입에 따라 다른 방식으로 처리</strong>를 해야 한다. FileInput/OutputStream 클래스를 상속받고 처리할 데이터의 타입에 따라 메서드를 추가한 클래스(DataFileInputStream)를 만들어보자.</p><h2 id="상속-관계로-기능-확장">상속 관계로 기능 확장</h2><h3 id="datafileiostream-구현-상속">DataFileIOStream 구현 (상속)</h3><p><strong>DataFileOutputStream</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataFileOutputStream</span> <span class="kd">extends</span> <span class="nc">FileOutputStream</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">DataOutputStream</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeUTF</span><span class="o">(</span><span class="nc">String</span> <span class="n">str</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 write() 메서드를 사용하여 문자열 출력</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="n">str</span><span class="o">.</span><span class="na">getBytes</span><span class="o">(</span><span class="s">"UTF-8"</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">.</span><span class="na">length</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeInt</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 write() 메서드를 사용하여 int 값 출력</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeLong</span><span class="o">(</span><span class="kt">int</span> <span class="n">value</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 write() 메서드를 사용하여 long 값 출력</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">56</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">48</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">40</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">32</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">24</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">16</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)(</span><span class="n">value</span> <span class="o">&gt;&gt;</span> <span class="mi">8</span><span class="o">));</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">((</span><span class="kt">int</span><span class="o">)</span><span class="n">value</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">writeBoolean</span><span class="o">(</span><span class="kt">boolean</span> <span class="n">b</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 write() 메서드를 사용하여 boolean 값 출력</span>
    <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">b</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>DataFileOutputStream을 이용하여 객체 출력</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="nc">DataFileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataFileOutputStream</span><span class="o">(</span><span class="s">"temp/test.data"</span><span class="o">);</span>

<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="s">"AB가각간"</span><span class="o">;</span>
<span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="mi">27</span><span class="o">;</span>
<span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>

<span class="n">out</span><span class="o">.</span><span class="na">writeUTF</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
<span class="n">out</span><span class="o">.</span><span class="na">writeInt</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">age</span><span class="o">);</span>
<span class="n">out</span><span class="o">.</span><span class="na">writeBoolean</span><span class="o">(</span><span class="n">member</span><span class="o">.</span><span class="na">gender</span><span class="o">);</span>
<span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></table></code></div></div><p><strong>DataFileInputStream</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataFileInputStream</span> <span class="kd">extends</span> <span class="nc">FileInputStream</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nf">DataFileInputStream</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">readUTF</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
    <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span> <span class="c1">//이름 배열 개수만큼 바이트를 읽어 배열에 저장</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">readInt</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    
    <span class="n">value</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">readLong</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kt">long</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">56</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">48</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">40</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">readBoolean</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>DataFileInputStream</strong>으로 객체 읽기</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="nc">DataFileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataFileInputStream</span><span class="o">(</span><span class="s">"temp/test"</span><span class="o">);</span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
<span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>

<span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readUTF</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readBoolean</span><span class="o">();</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%s\n"</span><span class="o">,</span> <span class="n">member</span><span class="o">);</span>
</pre></table></code></div></div><h3 id="bufferedfileiostream-구현-상속">BufferedFileIOStream 구현 (상속)</h3><h4 id="버퍼를-사용하는-이유">버퍼를 사용하는 이유</h4><p>버퍼를 사용하지 않고 파일을 복사하는 시간을 측정한다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="c1">// 파일 복사 및 시간 측정</span>
<span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test.pdf"</span><span class="o">);</span>
<span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test_2.pdf"</span><span class="o">)</span>

<span class="kt">int</span> <span class="n">b</span><span class="o">;</span>

<span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="kt">int</span> <span class="n">callCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="k">while</span> <span class="o">((</span><span class="n">b</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">pintln</span><span class="o">(</span><span class="n">callCount</span><span class="o">);</span>

<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></table></code></div></div><p>버퍼를 사용하여 파일을 복사하고 시간을 측정한다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="c1">// 파일 복사 및 시간 측정</span>
<span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test.pdf"</span><span class="o">);</span>
<span class="nc">FileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileOutputStream</span><span class="o">(</span><span class="s">"temp/test_2.pdf"</span><span class="o">)</span>

<span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">8192</span><span class="o">];</span>
<span class="kt">int</span> <span class="n">len</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

<span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="k">while</span> <span class="o">((</span><span class="n">len</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">pintln</span><span class="o">(</span><span class="n">callCount</span><span class="o">);</span>

<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></table></code></div></div><p>버퍼를 사용했을 때가 사용하지 않았을 때보다 훨씬 빨랐다.</p><ul><li><p>데이터 읽기 시간 = average seek time + data transfer time</p><li><p>퀀텀 HDD의 경우</p><ul><li>average seek time = 0.0105초<li>data transfer time = 0.00000005 초 / 1 byte</ul><li><p>1000 바이트를 읽을 때</p><ul><li>1바이트를 1000번 읽는 경우<ul><li>0.01050005초 * 1000 byte = 10.50005초</ul><li>1000바이트 1번 읽는 경우<ul><li>0.0105 * 0.00000005초 * 1000 byte = 0.01055초</ul></ul><li><p><strong>1바이트를 여러 번 읽을 경우 매번 바이트의 위치를 찾아야 하기 때문에 평균 탐색시간이 누적되어 한 번에 1000 바이트를 읽는 것보다 시간이 오래 걸린다.</strong></p><li><p>그러면 RAM에 배열의 크기를 크게 잡으면 좋지 않을까?</p><p>PC처럼 소수의 프로그램이 동시에 실행될 때는 상관 없지만, 서버처럼 데이터를 읽는 코드가 동시에 수천 개에서 수십만 개일 때는 아무리 작은 크기의 메모리라도 매우 많아지게 된다. 그래서 보통 8k 정도의 버퍼 크기를 유지하고 있다.</p><li><p>물론 프로그램의 용도나 목적에 따라 버퍼의 크기가 이보다 더 작아지거나 커질 수 있다.</p></ul><p>버퍼를 사용하여 데이터를 읽고 쓰는 일을 하는 클래스를 따로 정의하자.</p><p><strong>BufferedFileOutputStream</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BufferedFileOutputStream</span> <span class="kd">extends</span> <span class="nc">FileOutputStream</span> <span class="o">{</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">8196</span><span class="o">];</span>
  <span class="kt">int</span> <span class="n">cursor</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="nf">BufferedFileOutputStream</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">int</span> <span class="n">b</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">cursor</span> <span class="o">==</span> <span class="n">buf</span><span class="o">.</span><span class="na">length</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 버퍼가 다 차면</span>
      <span class="kd">super</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span> <span class="c1">// 버퍼에 들어 있는 데이터를 한 번에 출력한다.</span>
      <span class="n">cursor</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="c1">// 다시 커서를 초기화시킨다.</span>
    <span class="o">}</span>
    
    <span class="c1">// 1바이트 출력하라고 하면 일단 버퍼에 저장할 것이다.</span>
    <span class="n">buf</span><span class="o">[</span><span class="n">cursor</span><span class="o">++]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">b</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">write</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">for</span> <span class="o">(</span><span class="kt">byte</span> <span class="n">b</span> <span class="o">:</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">b</span> <span class="o">&amp;</span> <span class="mh">0x000000ff</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">close</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">flush</span><span class="o">();</span>
    <span class="kd">super</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">flush</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">cursor</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">buf</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">cursor</span><span class="o">);</span>
      <span class="n">cursor</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>BufferedFileInputStream</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BufferedFileInputStream</span> <span class="kd">extends</span> <span class="nc">FileInputStream</span> <span class="o">{</span>
  <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">8192</span><span class="o">];</span>
  <span class="kt">int</span> <span class="n">size</span><span class="o">;</span> <span class="c1">// 배열에 저장되어 있는 바이트 수</span>
  <span class="kt">int</span> <span class="n">cursor</span><span class="o">;</span> <span class="c1">// 바이트 읽은 배열의 위치</span>
  
  <span class="kd">public</span> <span class="nf">BufferedInputStream</span><span class="o">(</span><span class="nc">String</span> <span class="n">filename</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">filename</span><span class="o">);</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">cursor</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 버퍼에 저장되어 잇는 데이터를 모두 읽었다는 의미</span>
      <span class="k">if</span> <span class="o">((</span><span class="n">size</span> <span class="o">=</span> <span class="kd">super</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 파일에서 데이터를 읽으려고 했는데 데이터가 없다.</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">cursor</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">buf</span><span class="o">[</span><span class="n">cursor</span><span class="o">++]</span> <span class="o">&amp;</span> <span class="mh">0x000000ff</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">buf</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="c1">// 1바이트를 읽어서 파라미터로 받은 바이트 배열에 채운다.</span>
      <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
        <span class="c1">// 바이트 배열을 다 채우기도 전에 읽을 데이터가 없다면 읽기를 멈춘다.</span>
        <span class="k">break</span><span class="o">;</span>
      <span class="n">buf</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">i</span><span class="o">;</span> <span class="c1">// 지금까지 읽은 데이터의 수를 리턴한다.</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>BufferedFileIOStream을 사용하여 파일 복사 및 측정을 해보자</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre><span class="nc">BufferedFileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedFileInputStream</span><span class="o">(</span><span class="s">"temp/jls11.pdf"</span><span class="o">);</span>
<span class="nc">BufferedFileOutputStream</span> <span class="n">out</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedFileOutputStream</span><span class="o">(</span><span class="s">"temp/jls11_4.pdf"</span><span class="o">);</span>

<span class="kt">int</span> <span class="n">b</span><span class="o">;</span>

<span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="k">while</span><span class="o">((</span><span class="n">b</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">out</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">b</span><span class="o">);</span>
<span class="o">}</span>

<span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">endTiem</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">);</span>

<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
<span class="n">out</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></table></code></div></div><h3 id="메모리에서-데이터-읽기">메모리에서 데이터 읽기</h3><p>보통 바이트 배열에서 데이터를 읽을 때 <strong>인덱스</strong>를 가지고 직접 바이트 배열의 값을 읽는다. 그런데 <strong>바이트 배열도 그냥 데이터 저장소로 간주</strong>하고 <code class="language-plaintext highlighter-rouge">read()</code>를 사용해서 읽을 수 있다면, 개발자는 파일이 되었든 메모리가 되었든 <code class="language-plaintext highlighter-rouge">read()</code> 메서드 호출이라는 일관된 방법으로 데이터를 읽을 수 있기 때문에 유지보수가 편하게 된다. 즉 <strong>데이터가 저장된 장소에 상관없이 데이터를 읽을 때는 read()를 호출한다</strong>는 일관성 있는 규칙이 생기게 되는 것이다. 규칙이 있다는 것은 코딩을 매우 편하게 만든다.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="o">{</span><span class="mh">0x0b</span><span class="o">,</span> <span class="mh">0x41</span><span class="o">,</span> <span class="mh">0x42</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x80</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span>
              <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x81</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x84</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x1b</span><span class="o">,</span> <span class="mh">0x01</span><span class="o">};</span>

<span class="c1">// 바이트 배열에서 데이터를 읽는 도구</span>
<span class="nc">ByteArrayInputStream</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>

<span class="kt">int</span> <span class="n">b</span><span class="o">;</span>

<span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">b</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
  <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
    <span class="k">break</span><span class="o">;</span>
  <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">"%x "</span><span class="o">,</span> <span class="n">b</span><span class="o">);</span>
<span class="o">}</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">();</span>
<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></table></code></div></div><p>읽은 데이터를 객체에 저장해보자.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">Exam0210</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="o">{</span>
        <span class="mh">0x0b</span><span class="o">,</span> <span class="mh">0x41</span><span class="o">,</span> <span class="mh">0x42</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x80</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span>
        <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x81</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x84</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x1b</span><span class="o">,</span> <span class="mh">0x01</span><span class="o">};</span>

    <span class="nc">ByteArrayInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">ByteArrayInputStream</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>

    <span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
    <span class="c1">// byte[] =&gt; 0b 41 42 ea b0 80 ea b0 81 ea b0 84 00 00 00 1b 01</span>
    <span class="c1">//</span>
    <span class="c1">// 1) 문자열 읽기</span>
    <span class="c1">// - 문자열의 바이트의 크기를 먼저 읽는다.</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>

    <span class="c1">// - 읽은 문자열을 저장할 바이트 배열을 준비한다.</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>

    <span class="c1">// - 데이터를 읽어 바이트 배열에 저장한다.</span>
    <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span>

    <span class="c1">// - 바이트 배열에 저장된 문자 코드를 String 객체로 만든다.</span>
    <span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>

    <span class="c1">// 2) int 값 읽는다.</span>
    <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>

    <span class="c1">// 3) boolean 값을 읽는다.</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
      <span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">else</span>
      <span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="kc">false</span><span class="o">;</span>

    <span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>

  <span class="o">}</span>

<span class="o">}</span>

</pre></table></code></div></div><p>바이트 배열의 값을 읽어서 String이나 int, boolean 값으로 만들려면 위와 같이 비트이동 연산 등을 수행해야 한다. 항상 이런 식으로 코딩을 해야 한다면 읽어들일 항목이 많을 경우 코드가 매우 복잡해질 것이다. ByteArrayInputStream을 상속 받아 DataInputStream을 만들어 이런 기능을 수행하는 메서드를 추가하자.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataByteArrayInputStream</span> <span class="kd">extends</span> <span class="nc">ByteArrayInputStream</span> <span class="o">{</span>

  <span class="kd">public</span> <span class="nf">DataByteArrayInputStream</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">readUTF</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 read() 메서드를 사용하여 문자열 출력</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
    <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span> <span class="c1">// 배열 개수 만큼 바이트를 읽어 배열에 저장한다.</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">readInt</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 read() 메서드를 사용하여 int 값 출력</span>
    <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="n">value</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">readLong</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 read() 메서드를 사용하여 long 값 출력</span>
    <span class="kt">long</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">56</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">48</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">40</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">readBoolean</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 read() 메서드를 사용하여 boolean 값 출력</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">else</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p>DataByteArrayInputStream을 사용하자.</p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre><td class="rouge-code"><pre><span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="o">{</span><span class="mh">0x0b</span><span class="o">,</span> <span class="mh">0x41</span><span class="o">,</span> <span class="mh">0x42</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x80</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span>
              <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x81</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xea</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0xb0</span><span class="o">,</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="mh">0x84</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x00</span><span class="o">,</span> <span class="mh">0x1b</span><span class="o">,</span> <span class="mh">0x01</span><span class="o">};</span>

<span class="nc">DataByteArrayInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataByteArrayInputStream</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>

<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>

<span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readUTF</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readInt</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">gender</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">readBoolean</span><span class="o">();</span>

<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">member</span><span class="o">);</span>
</pre></table></code></div></div><p>그런데 DataByteArrayInputStream은 위에서 만든 DataFileInputStream 클래스와 생성자 빼고 나머지 <strong>코드가 모두 같다</strong>. 그러나 안타깝게도 DataFileInputStream의 코드를 복사하지 않고 재사용하는 방법은 없다. 이것이 <strong>상속으로 기능을 확장했을 때의 한계</strong>이다.</p><p>상속 관계가 아니라 포함 관계로 변경하자. 바이트 값을 읽어 String, int, boolean 값으로 바꾸는 코드를 장신구(decorator)처럼 붙였다 뗐다 할 수 있게 만드는 것이다.</p><h2 id="포함-관계로-기능-확장">포함 관계로 기능 확장</h2><p>상속 관계를 포함 관계로 변경하면 코드가 중복되지 않고, <strong>장식품처럼 여러 스트림 클래스에 붙여서 사용할 수 있다</strong>. 즉 재사용성이 높고 유지보수가 쉬워진다.</p><p>이렇게 만든 클래스는 <strong>실제 데이터가 저장된 장소로부터 데이터를 읽는 일을 하지 않는다</strong>. <strong>단지 읽어 온 데이터를 중간에서 가공 처리하여 리턴</strong>하는 일을 한다. 이런 류의 클래스를 <strong>데이터 처리 스트림 클래스(data processing stream class)</strong>라고 한다.</p><p><strong>BufferedInputStream</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">BufferedInputStream</span> <span class="o">{</span>
  <span class="nc">InputStream</span> <span class="n">in</span><span class="o">;</span>
  
  <span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="mi">8192</span><span class="o">];</span>
  <span class="kt">int</span> <span class="n">size</span><span class="o">;</span>
  <span class="kt">int</span> <span class="n">cursor</span><span class="o">;</span>
  
  <span class="kd">public</span> <span class="nf">BufferedInputStream</span><span class="o">(</span><span class="nc">InputStream</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">in</span> <span class="o">=</span> <span class="n">in</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">cursor</span> <span class="o">==</span> <span class="n">size</span><span class="o">)</span> <span class="o">{</span> <span class="c1">// 버퍼에 저장되어 있는 데이터를 모두 읽었다.</span>
      <span class="k">if</span> <span class="o">((</span><span class="n">size</span> <span class="o">==</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">buf</span><span class="o">))</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">cursor</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">buf</span><span class="o">[</span><span class="n">cursor</span><span class="o">++]</span> <span class="o">&amp;</span> <span class="mh">0x000000ff</span><span class="o">;</span>
  <span class="o">}</span>
  
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">read</span><span class="o">(</span><span class="kt">byte</span><span class="o">[]</span> <span class="n">buf</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="k">for</span> <span class="o">(;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">buf</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
      <span class="c1">// 1바이트를 읽어서 파라미터로 받은 바이트 배열에 채운다.</span>
      <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="k">this</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">b</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// 바이트 배열을 다 채우기도 전에 읽을 데이터가 없다면 읽기를 멈춘다.</span>
        <span class="k">break</span><span class="o">;</span>
      <span class="o">}</span>
      <span class="n">buf</span><span class="o">[</span><span class="n">i</span><span class="o">]</span> <span class="o">=</span> <span class="o">(</span><span class="kt">byte</span><span class="o">)</span> <span class="n">b</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">i</span><span class="o">;</span> <span class="c1">// 지금까지 읽은 데이터의 수를 리턴한다.</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>BufferedInputStream, BufferedOutputStream 사용하기</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/jls11.pdf"</span><span class="o">);</span>

<span class="c1">// 기존의 FileInputStream에 버퍼 기능을 덧붙이기 위해서 상속 대신 포함하는 방식을 사용한다.</span>
<span class="c1">// 다음 BufferedInputStream 은 FileInputStream을 포함한다.</span>
<span class="c1">// 즉 파일에서 데이터를 읽을 때 FileInputStream을 사용한다.</span>
<span class="nc">BufferedInputStream</span> <span class="n">in2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedInputStream</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>

<span class="kt">int</span> <span class="n">b</span><span class="o">;</span>

<span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span> <span class="c1">// 밀리초</span>

<span class="kt">int</span> <span class="n">callCount</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
<span class="k">while</span> <span class="o">((</span><span class="n">b</span> <span class="o">=</span> <span class="n">in2</span><span class="o">.</span><span class="na">read</span><span class="o">())</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
  <span class="n">callCount</span><span class="o">++;</span> <span class="c1">// 파일을 끝까지 읽는다.</span>

<span class="kt">long</span> <span class="n">endTime</span> <span class="o">=</span> <span class="nc">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>

<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">endTime</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">);</span>
<span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">callCount</span><span class="o">);</span>

<span class="n">in</span><span class="o">.</span><span class="na">close</span><span class="o">();</span>
</pre></table></code></div></div><p><strong>DataInputStream</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
</pre><td class="rouge-code"><pre><span class="kd">public</span> <span class="kd">class</span> <span class="nc">DataInputStream</span> <span class="o">{</span>
  <span class="c1">// FileInputStream 이나 ByteArrayInputStream 을 포함하는 레퍼런스</span>
  <span class="nc">InputStream</span> <span class="n">in</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">DataInputStream</span><span class="o">(</span><span class="nc">InputStream</span> <span class="n">in</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">in</span> <span class="o">=</span> <span class="n">in</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="nc">String</span> <span class="nf">readUTF</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 생성자에서 받은 InputStream 객체의 read() 메서드를 사용하여 문자열  값을 읽어서 리턴한다.</span>
    <span class="kt">int</span> <span class="n">size</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="kt">byte</span><span class="o">[]</span> <span class="n">bytes</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="o">[</span><span class="n">size</span><span class="o">];</span>
    <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">bytes</span><span class="o">);</span> <span class="c1">// 배열 개수 만큼 바이트를 읽어 배열에 저장한다.</span>
    <span class="k">return</span> <span class="k">new</span> <span class="nf">String</span><span class="o">(</span><span class="n">bytes</span><span class="o">,</span> <span class="s">"UTF-8"</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">readInt</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 생성자에서 받은 InputStream 객체의 read() 메서드를 사용하여 int 값을 읽어서 리턴한다.</span>
    <span class="kt">int</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="n">value</span> <span class="o">=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">readLong</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 생성자에서 받은 InputStream 객체의 read() 메서드를 사용하여 long 값을 읽어서 리턴한다.</span>
    <span class="kt">long</span> <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">56</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">48</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">40</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">32</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">24</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">16</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">&lt;&lt;</span> <span class="mi">8</span><span class="o">;</span>
    <span class="n">value</span> <span class="o">+=</span> <span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">readBoolean</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">Exception</span> <span class="o">{</span>
    <span class="c1">// 상속 받은 read() 메서드를 사용하여 boolean 값 값을 읽어서 리턴한다.</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">in</span><span class="o">.</span><span class="na">read</span><span class="o">()</span> <span class="o">==</span> <span class="mi">1</span><span class="o">)</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">else</span>
      <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></table></code></div></div><p><strong>현재 구조의 문제점: DataInputStream과 BufferedInputStream 사용하기</strong></p><div class="language-java highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="c1">// FileInputStream</span>
<span class="c1">// - 파일 저장소에서 데이터를 읽는 일을 한다.</span>
<span class="nc">FileInputStream</span> <span class="n">in</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">FileInputStream</span><span class="o">(</span><span class="s">"temp/test4.data"</span><span class="o">);</span>

<span class="c1">// FileInputStream + BufferedInputStream</span>
<span class="c1">// - 버퍼를 이용하여 일정량의 데이터를 왕창 읽어온 다음에 바이트를 꺼낸다.</span>
<span class="c1">// - 읽기 속도를 높이는 일을 한다.</span>
<span class="nc">BufferedInputStream</span> <span class="n">in2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">BufferedInputStream</span><span class="o">(</span><span class="n">in</span><span class="o">);</span>

<span class="c1">// FileInputStream + BufferedInputStream + DataInputStream</span>
<span class="c1">// - 문자열이나 자바 기본 타입의 데이터를 좀 더 쉽게 읽기</span>
<span class="c1">// - 그러나 안타깝게도 이런 식으로 기능을 확장할 수 없다.</span>
<span class="c1">//   왜? </span>
<span class="c1">//   - DataInputStream 생성자에는 InputStream 객체만 넘겨줄 수 있다.</span>
<span class="c1">//   - 즉 DataInputStream은 InputStream 객체에만 연결할 수 있다.</span>
<span class="c1">//   - BufferedInputStream은 InputStream 의 자식이 아니기 때문에 </span>
<span class="c1">//     DataInputStream에 연결할 수 없다.</span>
<span class="nc">DataInputStream</span> <span class="n">in3</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DataInputStream</span><span class="o">(</span><span class="n">in2</span><span class="o">);</span> <span class="c1">// 컴파일 오류!</span>

<span class="c1">// 만약 위의 코드처럼 DataInputStream을 BufferedInputStream에 연결할 수 있다면,</span>
<span class="c1">// 회원 정보를 읽을 때 버퍼를 사용하기 때문에 속도가 빠를텐데...</span>
<span class="c1">// 안타깝게도 현재의 클래스 구조로는 불가능하다!</span>
<span class="c1">// </span>
<span class="nc">Member</span> <span class="n">member</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Member</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">in3</span><span class="o">.</span><span class="na">readUTF</span><span class="o">();</span>
<span class="n">member</span><span class="o">.</span><span class="na">age</span> <span class="o">=</span> <span class="n">in3</span><span class="o">.</span>
</pre></table></code></div></div><p>현재 구조는 DataInputStream과 BufferedInputStream이 InputStream객체를 파라미터로 받아 객체의 기능을 확장하고 있다. 그러나 BufferedInputStream과 DataInputStream을 동시에 사용할 수는 없는데, 두 클래스 모두 InputStream의 자손클래스가 아니라 파라미터로 받지 못하기 때문이다. 내일 수업에서는 BufferedIOStream과 DataIOStream이 IOStream을 상속하도록 변경할 것이다.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/bitcamp/'>bitcamp</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/bitcamp/" class="post-tag no-text-decoration" >bitcamp</a> <a href="/tags/java/" class="post-tag no-text-decoration" >java</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=학원 #44일차: 파일 입출력: byte stream - 하연&url=https://hayeon17kim.github.io//posts/200921-44/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=학원 #44일차: 파일 입출력: byte stream - 하연&u=https://hayeon17kim.github.io//posts/200921-44/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=학원 #44일차: 파일 입출력: byte stream - 하연&url=https://hayeon17kim.github.io//posts/200921-44/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/system-deisign-capacity-estimation/">System Design: Capacity Estimate</a><li><a href="/posts/today-i-learned-2021-04-27/">주니어 성장일기: 2021.04.27</a><li><a href="/posts/today-i-learned-2021-04-26/">주니어 성장일기: 2021.04.26</a><li><a href="/posts/fastcampus-01/">자료구조와 알고리즘이란</a><li><a href="/posts/today-i-learned-2021-04-25/">주니어 성장일기: 2021.04.25</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble-shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/201123-85/"><div class="card-body"> <span class="timeago small" > Nov 23, 2020 <i class="unloaded">2020-11-23T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #85일차:서블릿 프로그래밍, WAS, JavaEE와 Servlet 컨테이너, Servlet 인터페이스의 Life-cycle 메서드</h3><div class="text-muted small"><p> 서블릿 프로그래밍 웹 애플리케이션 서버 아키텍쳐의 개념 JavaEE와 Servlet API의 관계 JavaEE 구현체와 서블릿 컨테이너의 관계 eomcs-web-project/src-00 예제 실습 Servlet 인터페이스와 Life-cycle 메서드 WAS(Web Application Server) 아키텍처 이전까지는 사...</p></div></div></a></div><div class="card"> <a href="/posts/201124-86/"><div class="card-body"> <span class="timeago small" > Nov 24, 2020 <i class="unloaded">2020-11-24T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #86일차:서블릿 프로그래밍, 프로젝트를 WAS 아키텍처로 전환</h3><div class="text-muted small"><p> 서블릿 컨테이너가 관리하는 컴포넌트는 서블릿, 필터, 리스너로 3가지이다. Servlet 만들기 1. javax.servlet.Servlet 인터페이스 구현 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38...</p></div></div></a></div><div class="card"> <a href="/posts/201125-87/"><div class="card-body"> <span class="timeago small" > Nov 25, 2020 <i class="unloaded">2020-11-25T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>학원 #87일차: HTML 태그 사용법</h3><div class="text-muted small"><p> HTML/CSS 학습법: 결과 화면 먼저 보고 소스코드를 확인하자 UI와 UX UX(User Experience; 사용자 경험): 사용자 편의성 ex: 링크에 hover했을 때 커서가 손모양으로 바뀌어야 한다. UI(User Interface): 기능을 하는 화면이 있는가 HTML ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/200918-43/" class="btn btn-outline-primary" prompt="Older"><p>학원 #43일차: 파일 입출력 API</p></a> <a href="/posts/corejs0101/" class="btn btn-outline-primary" prompt="Newer"><p>[JS] 코어 자바스크립트 #1.1: 자바스크립트란?</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//hayeon17kim-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = '학원 #44일차: 파일 입출력: byte stream'; this.page.url = 'https://hayeon17kim.github.io//posts/200921-44/'; this.page.identifier = '/posts/200921-44/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/MONI56219559">hayeon_kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://hayeon17kim.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
