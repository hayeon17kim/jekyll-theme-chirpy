<!DOCTYPE html><html lang="kr-KR" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="pv-cache-enabled" content="false"><meta name="generator" content="Jekyll v4.2.0" /><meta property="og:title" content="코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋" /><meta name="author" content="hayeon_kim" /><meta property="og:locale" content="kr_KR" /><meta name="description" content="weakmap과 weakset" /><meta property="og:description" content="weakmap과 weakset" /><link rel="canonical" href="https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/" /><meta property="og:url" content="https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/" /><meta property="og:site_name" content="하연" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-11-16T00:00:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋" /><meta name="twitter:site" content="@MONI56219559" /><meta name="twitter:creator" content="@hayeon_kim" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"hayeon_kim"},"headline":"코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋","dateModified":"2020-11-16T00:00:00+08:00","datePublished":"2020-11-16T00:00:00+08:00","description":"weakmap과 weakset","url":"https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/"},"@context":"https://schema.org"}</script><title>코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋 | 하연</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-173202420-1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-173202420-1'); }); </script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" alt="avatar" class="mx-auto"> <img src="/assets/img/bio-photo.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">하연</a></div><div class="site-subtitle font-italic">어제보다 나은 코드를 위해</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-laptop-code ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center"> <a href="https://github.com/hayeon17kim" aria-label="github" class="order-3" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/MONI56219559" aria-label="twitter" class="order-4" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['hayeon17kim','gmail.com'].join('@')" aria-label="email" class="order-5" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" class="order-6" > <i class="fas fa-rss"></i> </a> <span class="icon-border order-2"></span> <span id="mode-toggle-wrapper" class="order-1"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋</h1><div class="post-meta text-muted d-flex flex-column"><div> <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Mon, Nov 16, 2020, 12:00 AM +0800" > Nov 16, 2020 <i class="unloaded">2020-11-16T00:00:00+08:00</i> </span> by <span class="author"> hayeon_kim </span></div><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="2698 words">14 min</span></div></div><div class="post-content"><h2 id="weakmap과-weakset">weakmap과 weakset</h2><p>자료구조 구성요소(객체의 프로퍼티, 배열의 요소, 맵이나 셋 구성 요소)도 자신이 속한 자료구조가 메모리에 남아있는 동안 <strong>도달 가능한 값으로 취급</strong>되어 <strong>메모리에서 삭제되지 않는다.</strong> (가비지 컬렉터의 대상이 되지 않는다)</p><blockquote><p>자바스크립트 엔진은 도달 가능한 값을 메모리에 유지한다.</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span> <span class="p">};</span>

<span class="kd">let</span> <span class="nx">map</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
<span class="nx">map</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">john</span><span class="p">,</span> <span class="dl">"</span><span class="s2">...</span><span class="dl">"</span><span class="p">);</span>

<span class="nx">john</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// 참조를 null로 덮어씀</span>

<span class="c1">// map.keys()를 이용하면 해당 객체를 얻는 것도 가능하다.</span>
<span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">obj</span> <span class="k">of</span> <span class="nx">map</span><span class="p">.</span><span class="nx">keys</span><span class="p">())</span> <span class="p">{</span>
  <span class="nx">alert</span><span class="p">(</span><span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">obj</span><span class="p">));</span> <span class="c1">//{"name":"John"}</span>
<span class="p">}</span>

<span class="nx">alert</span><span class="p">(</span><span class="nx">map</span><span class="p">.</span><span class="nx">size</span><span class="p">);</span> <span class="c1">// 1</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">위크맵</code>은 일반 맵과 달리 키로 쓰인 객체가 가비지 컬렉션의 대상이 된다.</p><h3 id="위크맵">위크맵</h3><p><code class="language-plaintext highlighter-rouge">위크맵</code>의 키는 반드시 객체여야 한다.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">weakMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakMap</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{};</span>
<span class="nx">weakMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ok</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">weakMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="dl">"</span><span class="s2">test</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">Whoops</span><span class="dl">"</span><span class="p">);</span> <span class="c1">// Error: Invalid value used as weak map key</span>
</pre></table></code></div></div><p>위크맵의 키로 사용된 객체를 <strong>참조하는 것이 아무것도 없다면</strong> 해당 객체는 <strong>메모리와 위크맵에서 자동으로 삭제</strong>된다.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span> <span class="p">};</span>
<span class="kd">let</span> <span class="nx">weakMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakMap</span><span class="p">();</span>
<span class="nx">weakMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">john</span><span class="p">,</span> <span class="dl">"</span><span class="s2">...</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">john</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span> <span class="c1">// 참조를 덮어씀</span>
<span class="c1">// john을 나타내는 객체는 이제 메모리에서 지워진다.</span>
</pre></table></code></div></div><p>위크맵은 <strong>반복 작업</strong>과 <strong><code class="language-plaintext highlighter-rouge">keys()</code>, <code class="language-plaintext highlighter-rouge">values()</code>, <code class="language-plaintext highlighter-rouge">entries()</code></strong> 메서드를 <strong>지원하지 않는다.</strong> 따라서 위크맵에서는 <strong>키나 값 전체를 얻는 게 불가능</strong>하다.</p><ul><li><code class="language-plaintext highlighter-rouge">weakMap.get(key)</code><li><code class="language-plaintext highlighter-rouge">weakMap.set(key, value)</code><li><code class="language-plaintext highlighter-rouge">weakMap.delete(key)</code><li><code class="language-plaintext highlighter-rouge">weakMap.has(key)</code></ul><p>가비지 컬렉션의 동작 방식 때문에 적은 메서드만 제공한다. 객체는 모든 참조를 잃게 되면 자동으로 가비지 컬렉션의 대상이 되는데, <strong>가비지 컬렉션의 동작 시점은 정확히 알 수 없다</strong>. 가비지 컬렉터는 한 번에 메모리를 청소할 수도 있고, 부분 부분 메모리를 청소할 수도 있다. 따라서 <strong>위크맵의 요소(키/값) 전체를 대상으로 무언가를 하는 메서드는 동작 자체가 불가능하다.</strong></p><h4 id="유스케이스-추가데이터">유스케이스: 추가데이터</h4><p><strong>부차적인 데이터를 저장</strong>할 곳이 필요할 때 사용할 수 있다. 서드파티 라이브러리와 같은 <strong>외부 코드에 <em>속한</em> 객체를 가지고 작업</strong>을 한다면, 이 객체에 데이터를 추가해줘야 하는데, <strong>추가해 줄 데이터는 객체가 살아있는 동안에만 유효한 상황</strong>에 사용한다. 이럴 때 <code class="language-plaintext highlighter-rouge">위크맵</code>에 원하는 데이터를 저장하고, 키는 객체를 사용하면 된다. 이렇게 하면 <strong>객체가 가비지 컬렉션의 대상이 될 때, 데이터도 함께 사라지게 된다.</strong></p><blockquote><p>서드파티: 편하고 효율적인 개발을 위해 프로그래밍 개발과 개발자 사이의 중간다리 역할을 하는 플러그인, 라이브러리, 프레임워크를 서드파티로 볼 수 있다.</p></blockquote><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="nx">weakMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">john</span><span class="p">,</span> <span class="dl">"</span><span class="s2">비밀문서</span><span class="dl">"</span><span class="p">);</span>
<span class="c1">// john이 사망하면, 비밀문서는 자동으로 파기된다.</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">맵</code>을 사용해 사용자의 방문 횟수를 세보자.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c1">//visitsCount.js</span>
<span class="kd">let</span> <span class="nx">visitsCountMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>

<span class="c1">// 사용자가 방문하면 방문 횟수를 늘려준다.</span>
<span class="kd">function</span> <span class="nx">countUser</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">let</span> <span class="nx">count</span> <span class="o">=</span> <span class="nx">visitsCountMap</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">user</span><span class="p">)</span> <span class="o">||</span> <span class="mi">0</span><span class="p">;</span>
  <span class="nx">visitsCountMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">user</span><span class="p">,</span> <span class="nx">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></table></code></div></div><p>아래는 John 이라는 사용자가 방문했을 때, 어떻게 방문 횟수가 증가하는 지 보여준다.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span> <span class="p">};</span>
<span class="nx">countUser</span><span class="p">(</span><span class="nx">john</span><span class="p">);</span> <span class="c1">// John의 방문 횟수를 증가시킨다.</span>
<span class="c1">// John의 방문 횟수를 셀 필요가 없어지면 아래와 같이 john을 null로 덮어쓴다.</span>
<span class="nx">john</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">john</code>을 나타내는 객체는 <code class="language-plaintext highlighter-rouge">visitCountMap</code>의 키로 사용되고 있어 메모리에서 삭제되지 않는다. 특정 사용자를 나타내는 객체가 메모리에서 사라지면 해당 객체에 대한 정보도 손수 지워줘야 한다. 이렇게 하지 않으면 <code class="language-plaintext highlighter-rouge">visitsCountMap</code>가 차지하는 메모리 공간이 한없이 커질 것이다. 수동으로 비워주는 것은 꽤 골치 아픈데, <code class="language-plaintext highlighter-rouge">위크맵</code>을 사용해 사용자 방문 횟수를 저장하면 <code class="language-plaintext highlighter-rouge">visitsCountMap</code>을 수동으로 청소해줄 필요가 없다. <code class="language-plaintext highlighter-rouge">위크맵</code>의 <strong>키(<code class="language-plaintext highlighter-rouge">john</code>)에 대응하는 값</strong>(john의 방문 횟수)도 <strong>자동으로 가비지 컬렉션의 대상이 된다.</strong></p><h4 id="유스케이스-캐싱">유스케이스: 캐싱</h4><p>캐싱은 <strong>시간이 오래 걸리는 작업의 결과</strong>를 <strong>저장</strong>해서 <strong>연산 시간과 비용을 절약</strong>해주는 기법이다. 동일한 함수를 여러 번 호출해야 할 때, 최초 호출 시 반환된 값을 저장해 놓았다가 그 다음엔 함수 호출 대신 저장된 값을 사용하는 것이 캐싱의 실례이다.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre><td class="rouge-code"><pre><span class="c1">// 📁 cache.js</span>
<span class="kd">let</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Map</span><span class="p">();</span>
<span class="c1">// 연산을 수행하고 그 결과를 맵에 저장합니다.</span>
<span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cache</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="cm">/* 연산 수행 */</span> <span class="nx">obj</span><span class="p">;</span>
    <span class="nx">cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="k">return</span> <span class="nx">cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 함수 process()를 호출해봅시다.</span>
<span class="c1">// 📁 main.js</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="cm">/* ... 객체 ... */</span><span class="p">};</span>
<span class="kd">let</span> <span class="nx">result1</span> <span class="o">=</span> <span class="nx">process</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span> <span class="c1">// 함수를 호출합니다.</span>

<span class="c1">// 동일한 함수를 두 번째 호출할 땐,</span>
<span class="kd">let</span> <span class="nx">result2</span> <span class="o">=</span> <span class="nx">process</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span> <span class="c1">// 연산을 수행할 필요 없이 맵에 저장된 결과를 가져오면 됩니다.</span>
<span class="c1">// 객체가 쓸모없어지면 아래와 같이 null로 덮어씁니다.</span>
<span class="nx">obj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">cache</span><span class="p">.</span><span class="nx">size</span><span class="p">);</span> <span class="c1">// 1 (엇! 그런데 객체가 여전히 cache에 남아있네요. 메모리가 낭비되고 있습니다.)</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">맵</code>을 사용할 때는 객체가 필요 없어져도 <code class="language-plaintext highlighter-rouge">cache</code>를 수동으로 청소해야 하는데, <code class="language-plaintext highlighter-rouge">위크맵</code>으로 교체하면 객체가 메모리에서 삭제될 때, 캐시에 저장된 결과(함수 연산 결과) 역시 메모리에서 자동으로 삭제된다.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
</pre><td class="rouge-code"><pre><span class="c1">// 📁 cache.js</span>
<span class="kd">let</span> <span class="nx">cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakMap</span><span class="p">();</span>

<span class="c1">// 연산을 수행하고 그 결과를 위크맵에 저장합니다.</span>
<span class="kd">function</span> <span class="nx">process</span><span class="p">(</span><span class="nx">obj</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cache</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">obj</span><span class="p">))</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">result</span> <span class="o">=</span> <span class="cm">/* 연산 수행 */</span> <span class="nx">obj</span><span class="p">;</span>

    <span class="nx">cache</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">obj</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="nx">cache</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="p">}</span>

<span class="c1">// 📁 main.js</span>
<span class="kd">let</span> <span class="nx">obj</span> <span class="o">=</span> <span class="p">{</span><span class="cm">/* ... 객체 ... */</span><span class="p">};</span>

<span class="kd">let</span> <span class="nx">result1</span> <span class="o">=</span> <span class="nx">process</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">result2</span> <span class="o">=</span> <span class="nx">process</span><span class="p">(</span><span class="nx">obj</span><span class="p">);</span>

<span class="c1">// 객체가 쓸모없어지면 아래와 같이 null로 덮어씁니다.</span>
<span class="nx">obj</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

<span class="c1">// 이 예시에선 맵을 사용한 예시처럼 cache.size를 사용할 수 없습니다.</span>
<span class="c1">// 하지만 obj가 가비지 컬렉션의 대상이 되므로, 캐싱된 데이터 역시 메모리에서 삭제될 겁니다.</span>
<span class="c1">// 삭제가 진행되면 cache엔 그 어떤 요소도 남아있지 않을겁니다.</span>
</pre></table></code></div></div><h3 id="위크셋">위크셋</h3><ul><li>셋과 유사하지만 객체만 저장할 수 있다는 점이 다르다.<li>위크셋도 부차적인 데이터를 저장할 때 사용할 수 있다.<li>다만, 위크맵처럼 복잡한 데이터를 저장하지 않고, “예”나 “아니오” 같은 간단한 답변을 얻는 용도로 사용한다.</ul><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">visitedSet</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakSet</span><span class="p">();</span>

<span class="kd">let</span> <span class="nx">john</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span> <span class="p">};</span>
<span class="kd">let</span> <span class="nx">pete</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Pete</span><span class="dl">"</span> <span class="p">};</span>
<span class="kd">let</span> <span class="nx">mary</span> <span class="o">=</span> <span class="p">{</span> <span class="na">name</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Mary</span><span class="dl">"</span> <span class="p">};</span>

<span class="nx">visitedSet</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">john</span><span class="p">);</span> <span class="c1">// John이 사이트를 방문합니다.</span>
<span class="nx">visitedSet</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">pete</span><span class="p">);</span> <span class="c1">// 이어서 Pete가 사이트를 방문합니다.</span>
<span class="nx">visitedSet</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">john</span><span class="p">);</span> <span class="c1">// 이어서 John이 다시 사이트를 방문합니다.</span>

<span class="c1">// visitedSet엔 두 명의 사용자가 저장될 겁니다.</span>

<span class="c1">// John의 방문 여부를 확인해보겠습니다.</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">visitedSet</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">john</span><span class="p">));</span> <span class="c1">// true</span>

<span class="c1">// Mary의 방문 여부를 확인해보겠습니다.</span>
<span class="nx">alert</span><span class="p">(</span><span class="nx">visitedSet</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">mary</span><span class="p">));</span> <span class="c1">// false</span>

<span class="nx">john</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
</pre></table></code></div></div><p>이후 <code class="language-plaintext highlighter-rouge">alert(visitedSet.has(john))</code>을 실행해보니 <code class="language-plaintext highlighter-rouge">false</code>가 출력되었다.</p><p><strong>객체</strong>엔 <strong>‘주요’ 자료</strong>를, <code class="language-plaintext highlighter-rouge">위크맵</code>과 <code class="language-plaintext highlighter-rouge">위크셋</code>엔 <strong>‘부수적인’ 자료</strong>를 저장하는 형태로 위크맵과 위크셋을 활용할 수 있다. 객체가 메모리에서 삭제되면, (그리고 오로지 <code class="language-plaintext highlighter-rouge">위크맵</code>과 <code class="language-plaintext highlighter-rouge">위크셋</code>의 키만 해당 객체를 참조하고 있다면) 위크맵이나 위크셋에 <strong>저장된 연관 자료들 역시 메모리에서 자동으로 삭제</strong>됩니다.</p><h3 id="과제">과제</h3><p>**Q1. ** ‘읽음’ 상태인 메시지 저장하기</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">messages</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">,</span> <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">How goes?</span><span class="dl">"</span><span class="p">,</span> <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">See you soon</span><span class="dl">"</span><span class="p">,</span> <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Alice</span><span class="dl">"</span><span class="p">}</span>
<span class="p">];</span>

<span class="kd">let</span> <span class="nx">readMessages</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakSet</span><span class="p">();</span>

<span class="nx">readMessages</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
<span class="nx">readMessages</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span>
<span class="nx">readMessages</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="nx">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span>

<span class="nx">readMessages</span><span class="p">.</span><span class="nx">has</span><span class="p">(</span><span class="nx">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="c1">// true</span>

<span class="nx">messages</span><span class="p">.</span><span class="nx">shift</span><span class="p">();</span> <span class="c1">// 배열의 맨 앞에 값을 제거한다.</span>
<span class="c1">// 이제 readMessages에는 요소가 두 개만 남게 되었다.</span>
</pre></table></code></div></div><p>위크셋은 반복 작업을 수행하는 메서드가 없지만, 배열에 저장된 모든 메시지를 대상으로 반복 작업을 수행해 해당 메시지가 위크셋에 저장되어있는지 화인하면 읽음 상태의 메시지를 한 번에 얻어올 수 있다.</p><p>위크셋을 사용하지 않고 메시지 객체에 <code class="language-plaintext highlighter-rouge">message.isRead=true</code>같은 프로퍼티를 추가해도 메시지가 읽음 상태인지 확인할 수 있다. 그런데 messages와 메시지 객체는 외부 코드에서 관리하고 있기 때문에 이 방법은 권장되지 않는다. 심볼형 프로퍼티를 사용하면 충돌을 피할 수는 있다.</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">isRead</span> <span class="o">=</span> <span class="nb">Symbol</span><span class="p">(</span><span class="dl">"</span><span class="s2">isRead</span><span class="dl">"</span><span class="p">);</span>
<span class="nx">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="nx">isRead</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</pre></table></code></div></div><p>이렇게 하면 서드파티 코드에서는 위에서 추가한 여분의 프로퍼티를 볼 수 없다. 그러나 위크셋을 쓰는 게 보다 건설적인 접근법이다.</p><blockquote><p>심볼을 이용하면 hidden 프로퍼티를 만들 수 있다. 심볼은 서드파티 코드에서 접근할 수 없기 때문에, 심볼을 사용하면 서드파티 코드가 모르게 객체에 식별자를 부여할 수 있다.</p></blockquote><p><strong>Q2.</strong> 읽은 날짜 저장하기</p><div class="language-js highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre><td class="rouge-code"><pre><span class="kd">let</span> <span class="nx">messages</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Hello</span><span class="dl">"</span><span class="p">,</span> <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">How goes?</span><span class="dl">"</span><span class="p">,</span> <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">John</span><span class="dl">"</span><span class="p">},</span>
  <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="dl">"</span><span class="s2">See you soon</span><span class="dl">"</span><span class="p">,</span> <span class="na">from</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Alice</span><span class="dl">"</span><span class="p">}</span>
<span class="p">];</span>

<span class="kd">let</span> <span class="nx">readMap</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">WeakMap</span><span class="p">();</span>

<span class="nx">readMap</span><span class="p">.</span><span class="kd">set</span><span class="p">(</span><span class="nx">messages</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="mi">2017</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">));</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/javascript/'>JavaScript</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/javascript/" class="post-tag no-text-decoration" >JavaScript</a> <a href="/tags/corejs/" class="post-tag no-text-decoration" >corejs</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋 - 하연&url=https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋 - 하연&u=https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋 - 하연&url=https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/system-deisign-capacity-estimation/">System Design: Capacity Estimate</a><li><a href="/posts/today-i-learned-2021-04-27/">주니어 성장일기: 2021.04.27</a><li><a href="/posts/today-i-learned-2021-04-26/">주니어 성장일기: 2021.04.26</a><li><a href="/posts/fastcampus-01/">자료구조와 알고리즘이란</a><li><a href="/posts/today-i-learned-2021-04-25/">주니어 성장일기: 2021.04.25</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble-shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div></div></div><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.js"></script><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/corejs0101/"><div class="card-body"> <span class="timeago small" > Sep 22, 2020 <i class="unloaded">2020-09-22T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[JS] 코어 자바스크립트 #1.1: 자바스크립트란?</h3><div class="text-muted small"><p> 자바스크립트란? 정의 자바스크립트는 ‘웹페이지에 생동감을 불어넣기 위해’ 만들어진 프로그래밍 언어이다. 자바스크립트로 작성한 프로그램을 스크립트(script) 라고 부른다. 스크립트는 웹페이지의 HTML 안에 작성할 수 있는데, 웹페이지를 불러올 때 스크립트가 자동으로 실행된다. 스크립트는 컴파일 없이 보통의 문자 형태로 작성할 수...</p></div></div></a></div><div class="card"> <a href="/posts/corejs0203/"><div class="card-body"> <span class="timeago small" > Sep 23, 2020 <i class="unloaded">2020-09-23T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>코어 자바스크립트 #2.2 엄격모드</h3><div class="text-muted small"><p> 엄격모드(strict mode) 하위 호환성 문제 자바스크립트는 오랫동안 기존의 기능을 변경하지 않으면서 새로운 기능이 추가되었기 때문에 하위 호환성 문제가 발생하지 않는 것이 장점이었다. 그러나 자바스크립트 창시자들의 실수나 불완전한 결정이 언어 안에 영원히 박제된다는 단점도 있었다. 이에 새롭게 제정된 ES5에서는 새로운 기능이 추가되고 기존...</p></div></div></a></div><div class="card"> <a href="/posts/corejs0206/"><div class="card-body"> <span class="timeago small" > Sep 24, 2020 <i class="unloaded">2020-09-24T00:00:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>코어 자바스크립트 #2.6: alert, prompt, confirm을 이용한 상호작용</h3><div class="text-muted small"><p> alert, prompt, confirm을 이용한 상호작용 브라우저는 사용자와 상호작용할 수 있는 세 가지 함수를 제공한다. alert, prompt, confirm은 모두 모달 창을 띄워주는데, 모달 창이 떠 있는 동안은 스크립트의 실행이 일시 중단되고, 사용자가 창을 닫기 전까진 나머지 페이지와 상호 작용이 불가능하다. 모달 창의 위치는 브라우저...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/201116-80/" class="btn btn-outline-primary" prompt="Older"><p>학원 #80일차: Proxy 패턴: Command의 트랜잭션 처리</p></a> <a href="/posts/201117-81/" class="btn btn-outline-primary" prompt="Newer"><p>학원 #81일차: 비즈니스 로직 분리: 서비스 객체 도입</p></a></div><div id="disqus" class="pt-2 pb-2"><p class="text-center text-muted small pb-5"> Loading comments from <a href="https://disqus.com/">Disqus</a> ...</p></div><script src="/assets/js/lib/jquery.disqusloader.min.js"></script> <script> const options = { scriptUrl: '//hayeon17kim-github-io.disqus.com/embed.js', disqusConfig: function() { this.page.title = '코어 자바스크립트 #5 자료구조와 자료형: 위크맵과 위크셋'; this.page.url = 'https://hayeon17kim.github.io//posts/corejs-weakmap-weakset/'; this.page.identifier = '/posts/corejs-weakmap-weakset/'; } }; $.disqusLoader('#disqus', options); </script></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2021 <a href="https://twitter.com/MONI56219559">hayeon_kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/java/">java</a> <a class="post-tag" href="/tags/javascript/">JavaScript</a> <a class="post-tag" href="/tags/bitcamp/">bitcamp</a> <a class="post-tag" href="/tags/modernjs/">modernJS</a> <a class="post-tag" href="/tags/project/">project</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/trouble-shooting/">trouble shooting</a> <a class="post-tag" href="/tags/devil/">devil</a> <a class="post-tag" href="/tags/corejs/">corejs</a> <a class="post-tag" href="/tags/network/">network</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="https://hayeon17kim.github.io/{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script>
